2024-10-22 15:06:42 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-22 15:06:42 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-22 15:06:42 ERROR r.a.u.service.FriendService - Request no send: userId=1, friendId=2
2024-10-22 15:08:51 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-22 15:08:51 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-22 15:08:51 INFO  r.a.u.service.FriendService - Saving friends for userId=1, friendId=2
2024-10-22 15:08:51 INFO  r.a.u.service.FriendService - Deleting request friendship for userId=1, friendId=2
2024-10-22 15:09:51 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-22 15:09:51 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-22 15:09:51 INFO  r.a.u.service.FriendService - Saving friends for userId=1, friendId=2
2024-10-22 15:09:51 INFO  r.a.u.service.FriendService - Deleting request friendship for userId=1, friendId=2
2024-10-22 15:09:51 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-22 15:09:51 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-22 15:09:51 ERROR r.a.u.service.FriendService - Request no send: userId=1, friendId=2
2024-10-22 15:10:16 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-22 15:10:16 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-22 15:10:16 INFO  r.a.u.service.FriendService - Saving friends for userId=1, friendId=2
2024-10-22 15:10:16 INFO  r.a.u.service.FriendService - Deleting request friendship for userId=1, friendId=2
2024-10-22 15:10:16 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-22 15:10:16 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-22 15:10:16 ERROR r.a.u.service.FriendService - Request no send: userId=1, friendId=2
2024-10-22 15:19:18 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-22 15:19:18 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-22 15:19:18 ERROR r.a.u.service.FriendService - Request no send: userId=1, friendId=2
2024-10-22 15:19:18 INFO  r.a.u.service.FriendService - Executing deleteFriend for userId=1, friendId=2
2024-10-22 15:19:18 INFO  r.a.u.service.FriendService - Friendship checking: userId=1, friendId=2
2024-10-22 15:19:18 ERROR r.a.u.service.FriendService - Users no friends: userId=1, friendId=2
2024-10-22 15:19:18 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-22 15:19:18 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-22 15:19:18 INFO  r.a.u.service.FriendService - Saving friends for userId=1, friendId=2
2024-10-22 15:19:18 INFO  r.a.u.service.FriendService - Deleting request friendship for userId=1, friendId=2
2024-10-22 15:19:52 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-22 15:19:52 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-22 15:19:52 ERROR r.a.u.service.FriendService - Request no send: userId=1, friendId=2
2024-10-22 15:19:52 INFO  r.a.u.service.FriendService - Executing deleteFriend for userId=1, friendId=2
2024-10-22 15:19:52 INFO  r.a.u.service.FriendService - Friendship checking: userId=1, friendId=2
2024-10-22 15:19:52 ERROR r.a.u.service.FriendService - Users no friends: userId=1, friendId=2
2024-10-22 15:19:52 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-22 15:19:52 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-22 15:19:52 INFO  r.a.u.service.FriendService - Saving friends for userId=1, friendId=2
2024-10-22 15:19:52 INFO  r.a.u.service.FriendService - Deleting request friendship for userId=1, friendId=2
2024-10-22 15:19:52 INFO  r.a.u.service.FriendService - Executing deleteFriend for userId=1, friendId=2
2024-10-22 15:19:52 INFO  r.a.u.service.FriendService - Friendship checking: userId=1, friendId=2
2024-10-22 15:19:52 INFO  r.a.u.service.FriendService - Deleting friend: userId=1, friendId=2
2024-10-22 15:19:52 INFO  r.a.u.service.FriendService - Deleting friend: userId=2, friendId=1
2024-10-22 16:09:00 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-22 16:09:00 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-22 16:09:00 ERROR r.a.u.service.FriendService - Request no send: userId=1, friendId=2
2024-10-22 16:09:00 INFO  r.a.u.service.FriendService - Executing deleteFriend for userId=1, friendId=2
2024-10-22 16:09:00 INFO  r.a.u.service.FriendService - Friendship checking: userId=1, friendId=2
2024-10-22 16:09:00 ERROR r.a.u.service.FriendService - Users no friends: userId=1, friendId=2
2024-10-22 16:09:00 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-22 16:09:00 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-22 16:09:00 INFO  r.a.u.service.FriendService - Saving friends for userId=1, friendId=2
2024-10-22 16:09:00 INFO  r.a.u.service.FriendService - Deleting request friendship for userId=1, friendId=2
2024-10-22 16:09:00 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-22 16:09:00 INFO  r.a.u.service.FriendService - Executing deleteFriend for userId=1, friendId=2
2024-10-22 16:09:00 INFO  r.a.u.service.FriendService - Friendship checking: userId=1, friendId=2
2024-10-22 16:09:00 INFO  r.a.u.service.FriendService - Deleting friend: userId=1, friendId=2
2024-10-22 16:09:00 INFO  r.a.u.service.FriendService - Deleting friend: userId=2, friendId=1
2024-10-22 16:11:00 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-22 16:11:00 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-22 16:11:00 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-22 16:11:00 ERROR r.a.u.service.FriendService - Request no send: userId=1, friendId=2
2024-10-22 16:11:00 INFO  r.a.u.service.FriendService - Executing deleteFriend for userId=1, friendId=2
2024-10-22 16:11:00 INFO  r.a.u.service.FriendService - Friendship checking: userId=1, friendId=2
2024-10-22 16:11:00 ERROR r.a.u.service.FriendService - Users no friends: userId=1, friendId=2
2024-10-22 16:11:00 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-22 16:11:00 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-22 16:11:00 INFO  r.a.u.service.FriendService - Saving friends for userId=1, friendId=2
2024-10-22 16:11:00 INFO  r.a.u.service.FriendService - Deleting request friendship for userId=1, friendId=2
2024-10-22 16:11:00 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-22 16:11:00 INFO  r.a.u.service.FriendService - Executing deleteFriend for userId=1, friendId=2
2024-10-22 16:11:00 INFO  r.a.u.service.FriendService - Friendship checking: userId=1, friendId=2
2024-10-22 16:11:00 INFO  r.a.u.service.FriendService - Deleting friend: userId=1, friendId=2
2024-10-22 16:11:00 INFO  r.a.u.service.FriendService - Deleting friend: userId=2, friendId=1
2024-10-22 16:24:55 INFO  r.a.u.service.InternalUserService - Executing getUserEmailByUserId for userId: 1
2024-10-22 16:24:55 INFO  r.a.u.service.InternalUserService - Getting email by userId: 1
2024-10-22 16:24:55 INFO  r.a.u.service.InternalUserService - Executing getUserEmailByUserId for userId: 1
2024-10-22 16:24:55 INFO  r.a.u.service.InternalUserService - Getting email by userId: 1
2024-10-22 16:27:29 INFO  r.a.u.service.InternalUserService - Executing getNameByUserId for userId: 1
2024-10-22 16:27:29 INFO  r.a.u.service.InternalUserService - Getting name by userId: 1
2024-10-22 16:27:29 INFO  r.a.u.service.InternalUserService - Executing getNameByUserId for userId: 1
2024-10-22 16:27:29 INFO  r.a.u.service.InternalUserService - Getting name by userId: 1
2024-10-22 16:27:29 INFO  r.a.u.service.InternalUserService - Executing getUserEmailByUserId for userId: 1
2024-10-22 16:27:29 INFO  r.a.u.service.InternalUserService - Getting email by userId: 1
2024-10-22 16:27:29 INFO  r.a.u.service.InternalUserService - Executing getUserEmailByUserId for userId: 1
2024-10-22 16:27:29 INFO  r.a.u.service.InternalUserService - Getting email by userId: 1
2024-10-22 16:36:24 INFO  r.a.u.service.InternalUserService - Executing getUserDetailsByEmail for email: test@gmail.com
2024-10-22 16:36:24 INFO  r.a.u.service.InternalUserService - Getting user by email: test@gmail.com
2024-10-22 16:38:29 INFO  r.a.u.service.InternalUserService - Executing getUserDetailsByEmail for email: test@gmail.com
2024-10-22 16:38:29 INFO  r.a.u.service.InternalUserService - Getting user by email: test@gmail.com
2024-10-22 16:44:05 INFO  r.a.u.service.InternalUserService - Executing getUserDetailsByEmail for email: test@gmail.com
2024-10-22 16:44:05 INFO  r.a.u.service.InternalUserService - Getting user by email: test@gmail.com
2024-10-22 16:44:05 INFO  r.a.u.service.InternalUserService - Executing getNameByUserId for userId: 1
2024-10-22 16:44:05 INFO  r.a.u.service.InternalUserService - Getting name by userId: 1
2024-10-22 16:44:05 INFO  r.a.u.service.InternalUserService - Executing getNameByUserId for userId: 1
2024-10-22 16:44:05 INFO  r.a.u.service.InternalUserService - Getting name by userId: 1
2024-10-22 16:44:05 INFO  r.a.u.service.InternalUserService - Executing getUserEmailByUserId for userId: 1
2024-10-22 16:44:05 INFO  r.a.u.service.InternalUserService - Getting email by userId: 1
2024-10-22 16:44:05 INFO  r.a.u.service.InternalUserService - Executing getUserEmailByUserId for userId: 1
2024-10-22 16:44:05 INFO  r.a.u.service.InternalUserService - Getting email by userId: 1
2024-10-22 16:44:05 INFO  r.a.u.service.InternalUserService - Executing getUserDetailsByEmail for email: test@gmail.com
2024-10-22 16:44:05 INFO  r.a.u.service.InternalUserService - Getting user by email: test@gmail.com
2024-10-22 16:54:04 INFO  r.a.u.service.InternalUserService - Executing getUserDetailsByEmail for email: test@gmail.com
2024-10-22 16:54:04 INFO  r.a.u.service.InternalUserService - Getting user by email: test@gmail.com
2024-10-22 16:54:04 INFO  r.a.u.service.InternalUserService - Executing getNameByUserId for userId: 1
2024-10-22 16:54:04 INFO  r.a.u.service.InternalUserService - Getting name by userId: 1
2024-10-22 16:54:04 INFO  r.a.u.service.InternalUserService - Executing getNameByUserId for userId: 1
2024-10-22 16:54:04 INFO  r.a.u.service.InternalUserService - Getting name by userId: 1
2024-10-22 16:54:04 INFO  r.a.u.service.InternalUserService - Executing saveUser for email: test@gmail.com
2024-10-22 16:54:04 INFO  r.a.u.service.InternalUserService - Saving user with email: test@gmail.com
2024-10-22 16:54:04 ERROR r.a.u.service.InternalUserService - Send data name, email: test@gmail.com, password, role in kafka for failure save user event
2024-10-22 16:54:04 INFO  r.a.u.service.InternalUserService - Executing saveUser for email: test@gmail.com
2024-10-22 16:54:04 INFO  r.a.u.service.InternalUserService - Saving user with email: test@gmail.com
2024-10-22 16:54:04 ERROR r.a.u.service.InternalUserService - Send data name, email: test@gmail.com, password, role in kafka for failure save user event
2024-10-22 16:54:04 INFO  r.a.u.service.InternalUserService - Executing getUserEmailByUserId for userId: 1
2024-10-22 16:54:04 INFO  r.a.u.service.InternalUserService - Getting email by userId: 1
2024-10-22 16:54:04 INFO  r.a.u.service.InternalUserService - Executing getUserEmailByUserId for userId: 1
2024-10-22 16:54:04 INFO  r.a.u.service.InternalUserService - Getting email by userId: 1
2024-10-22 16:54:04 INFO  r.a.u.service.InternalUserService - Executing getUserDetailsByEmail for email: test@gmail.com
2024-10-22 16:54:04 INFO  r.a.u.service.InternalUserService - Getting user by email: test@gmail.com
2024-10-22 16:54:04 INFO  r.a.u.service.InternalUserService - Executing saveUser for email: test@gmail.com
2024-10-22 16:54:04 INFO  r.a.u.service.InternalUserService - Saving user with email: test@gmail.com
2024-10-22 16:54:53 INFO  r.a.u.service.InternalUserService - Executing getUserDetailsByEmail for email: test@gmail.com
2024-10-22 16:54:53 INFO  r.a.u.service.InternalUserService - Getting user by email: test@gmail.com
2024-10-22 16:54:53 INFO  r.a.u.service.InternalUserService - Executing getNameByUserId for userId: 1
2024-10-22 16:54:53 INFO  r.a.u.service.InternalUserService - Getting name by userId: 1
2024-10-22 16:54:53 INFO  r.a.u.service.InternalUserService - Executing getNameByUserId for userId: 1
2024-10-22 16:54:53 INFO  r.a.u.service.InternalUserService - Getting name by userId: 1
2024-10-22 16:54:53 INFO  r.a.u.service.InternalUserService - Executing saveUser for email: test@gmail.com
2024-10-22 16:54:53 INFO  r.a.u.service.InternalUserService - Saving user with email: test@gmail.com
2024-10-22 16:54:53 ERROR r.a.u.service.InternalUserService - Send data name, email: test@gmail.com, password, role in kafka for failure save user event
2024-10-22 16:54:53 INFO  r.a.u.service.InternalUserService - Executing getUserEmailByUserId for userId: 1
2024-10-22 16:54:53 INFO  r.a.u.service.InternalUserService - Getting email by userId: 1
2024-10-22 16:54:53 INFO  r.a.u.service.InternalUserService - Executing getUserEmailByUserId for userId: 1
2024-10-22 16:54:53 INFO  r.a.u.service.InternalUserService - Getting email by userId: 1
2024-10-22 16:54:53 INFO  r.a.u.service.InternalUserService - Executing getUserDetailsByEmail for email: test@gmail.com
2024-10-22 16:54:53 INFO  r.a.u.service.InternalUserService - Getting user by email: test@gmail.com
2024-10-22 16:54:53 INFO  r.a.u.service.InternalUserService - Executing saveUser for email: test@gmail.com
2024-10-22 16:54:53 INFO  r.a.u.service.InternalUserService - Saving user with email: test@gmail.com
2024-10-22 16:55:25 INFO  r.a.u.service.InternalUserService - Executing getUserDetailsByEmail for email: test@gmail.com
2024-10-22 16:55:25 INFO  r.a.u.service.InternalUserService - Getting user by email: test@gmail.com
2024-10-22 16:55:25 INFO  r.a.u.service.InternalUserService - Executing getNameByUserId for userId: 1
2024-10-22 16:55:25 INFO  r.a.u.service.InternalUserService - Getting name by userId: 1
2024-10-22 16:55:25 INFO  r.a.u.service.InternalUserService - Executing getNameByUserId for userId: 1
2024-10-22 16:55:25 INFO  r.a.u.service.InternalUserService - Getting name by userId: 1
2024-10-22 16:55:25 INFO  r.a.u.service.InternalUserService - Executing getUserEmailByUserId for userId: 1
2024-10-22 16:55:25 INFO  r.a.u.service.InternalUserService - Getting email by userId: 1
2024-10-22 16:55:25 INFO  r.a.u.service.InternalUserService - Executing getUserEmailByUserId for userId: 1
2024-10-22 16:55:25 INFO  r.a.u.service.InternalUserService - Getting email by userId: 1
2024-10-22 16:55:25 INFO  r.a.u.service.InternalUserService - Executing getUserDetailsByEmail for email: test@gmail.com
2024-10-22 16:55:25 INFO  r.a.u.service.InternalUserService - Getting user by email: test@gmail.com
2024-10-22 16:55:25 INFO  r.a.u.service.InternalUserService - Executing saveUser for email: test@gmail.com
2024-10-22 16:55:25 INFO  r.a.u.service.InternalUserService - Saving user with email: test@gmail.com
2024-10-22 16:56:06 INFO  r.a.u.service.InternalUserService - Executing getUserDetailsByEmail for email: test@gmail.com
2024-10-22 16:56:06 INFO  r.a.u.service.InternalUserService - Getting user by email: test@gmail.com
2024-10-22 16:56:06 INFO  r.a.u.service.InternalUserService - Executing getNameByUserId for userId: 1
2024-10-22 16:56:06 INFO  r.a.u.service.InternalUserService - Getting name by userId: 1
2024-10-22 16:56:06 INFO  r.a.u.service.InternalUserService - Executing getNameByUserId for userId: 1
2024-10-22 16:56:06 INFO  r.a.u.service.InternalUserService - Getting name by userId: 1
2024-10-22 16:56:06 INFO  r.a.u.service.InternalUserService - Executing saveUser for email: test@gmail.com
2024-10-22 16:56:06 INFO  r.a.u.service.InternalUserService - Saving user with email: test@gmail.com
2024-10-22 16:56:06 ERROR r.a.u.service.InternalUserService - Send data name, email: test@gmail.com, password, role in kafka for failure save user event
2024-10-22 16:56:06 INFO  r.a.u.service.InternalUserService - Executing getUserEmailByUserId for userId: 1
2024-10-22 16:56:06 INFO  r.a.u.service.InternalUserService - Getting email by userId: 1
2024-10-22 16:56:06 INFO  r.a.u.service.InternalUserService - Executing getUserEmailByUserId for userId: 1
2024-10-22 16:56:06 INFO  r.a.u.service.InternalUserService - Getting email by userId: 1
2024-10-22 16:56:06 INFO  r.a.u.service.InternalUserService - Executing getUserDetailsByEmail for email: test@gmail.com
2024-10-22 16:56:06 INFO  r.a.u.service.InternalUserService - Getting user by email: test@gmail.com
2024-10-22 16:56:06 INFO  r.a.u.service.InternalUserService - Executing saveUser for email: test@gmail.com
2024-10-22 16:56:06 INFO  r.a.u.service.InternalUserService - Saving user with email: test@gmail.com
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Executing getUserDetailsByEmail for email: test@gmail.com
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Getting user by email: test@gmail.com
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Executing getNameByUserId for userId: 1
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Getting name by userId: 1
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Executing existsUserByEmail for email: test@gmail.com
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Executing getNameByUserId for userId: 1
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Getting name by userId: 1
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Executing saveUser for email: test@gmail.com
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Saving user with email: test@gmail.com
2024-10-22 17:02:58 ERROR r.a.u.service.InternalUserService - Send data name, email: test@gmail.com, password, role in kafka for failure save user event
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Executing getUserByUserEmail for email: test@gmail.com
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Getting user by email: test@gmail.com
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Executing existsUserByEmail for email: test@gmail.com
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Executing getUserEmailByUserId for userId: 1
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Getting email by userId: 1
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Executing getUserEmailByUserId for userId: 1
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Getting email by userId: 1
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Executing getUserDetailsByEmail for email: test@gmail.com
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Getting user by email: test@gmail.com
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Executing saveUser for email: test@gmail.com
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Saving user with email: test@gmail.com
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Executing getUserByUserEmail for email: test@gmail.com
2024-10-22 17:02:58 INFO  r.a.u.service.InternalUserService - Getting user by email: test@gmail.com
2024-10-22 20:09:44 INFO  r.a.u.service.KafkaProducerService - Executing sendFailureSaveUserEvent in kafka with name, email: null, password, role
2024-10-22 20:09:44 INFO  r.a.u.service.KafkaProducerService - Executing sendEditPasswordEvent in kafka
2024-10-22 20:09:44 INFO  r.a.u.service.KafkaProducerService - Executing sendEditEmailEvent in kafka with oldEmail
2024-10-22 20:11:23 INFO  r.a.u.service.KafkaProducerService - Executing sendFailureSaveUserEvent in kafka with name, email: null, password, role
2024-10-22 20:11:23 INFO  r.a.u.service.KafkaProducerService - Executing sendEditPasswordEvent in kafka
2024-10-22 20:11:23 INFO  r.a.u.service.KafkaProducerService - Executing sendEditEmailEvent in kafka with oldEmail
2024-10-22 20:14:37 INFO  r.a.u.service.KafkaProducerService - Executing sendFailureSaveUserEvent in kafka with name, email: null, password, role
2024-10-22 20:14:37 INFO  r.a.u.service.KafkaProducerService - Executing sendEditPasswordEvent in kafka
2024-10-22 20:14:37 INFO  r.a.u.service.KafkaProducerService - Executing sendEditEmailEvent in kafka with oldEmail
2024-10-22 20:15:03 INFO  r.a.u.service.KafkaProducerService - Executing sendFailureSaveUserEvent in kafka with name, email: null, password, role
2024-10-22 20:15:03 INFO  r.a.u.service.KafkaProducerService - Executing sendEditPasswordEvent in kafka
2024-10-22 20:15:03 INFO  r.a.u.service.KafkaProducerService - Executing sendEditEmailEvent in kafka with oldEmail
2024-10-22 20:18:00 INFO  r.a.u.service.KafkaProducerService - Executing sendFailureSaveUserEvent in kafka with name, email: null, password, role
2024-10-22 20:18:00 INFO  r.a.u.service.KafkaProducerService - Executing sendEditPasswordEvent in kafka
2024-10-22 20:18:00 INFO  r.a.u.service.KafkaProducerService - Executing sendEditEmailEvent in kafka with oldEmail
2024-10-22 20:18:43 INFO  r.a.u.service.KafkaProducerService - Executing sendFailureSaveUserEvent in kafka with name, email: null, password, role
2024-10-22 20:18:43 INFO  r.a.u.service.KafkaProducerService - Executing sendEditPasswordEvent in kafka
2024-10-22 20:18:43 INFO  r.a.u.service.KafkaProducerService - Executing sendEditEmailEvent in kafka with oldEmail
2024-10-23 18:14:00 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 18:14:00 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 18:14:01 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 18:14:01 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 5700 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 18:14:01 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 18:14:01 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 18:14:01 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Connect Timeout Exception on Url - http://localhost:8888/. Will try the next url if available
2024-10-23 18:14:01 WARN  o.s.c.c.c.ConfigServerConfigDataLoader - Could not locate PropertySource ([ConfigServerConfigDataResource@4b7c4456 uris = array<String>['http://config:password@localhost:8888/'], optional = true, profiles = list['default']]): I/O error on GET request for "http://localhost:8888/user-service/default": Connection refused: getsockopt
2024-10-23 18:14:04 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 18:14:04 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 263 ms. Found 3 JPA repository interfaces.
2024-10-23 18:14:04 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 18:14:05 WARN  o.s.w.c.s.GenericWebApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourceScriptDatabaseInitializer' parameter 0: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
2024-10-23 18:14:05 INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2024-10-23 18:14:05 ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.

Reason: Failed to determine a suitable driver class


Action:

Consider the following:
	If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.
	If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).

2024-10-23 18:14:05 ERROR o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [ru.andreyszdlv.userservice.controller.FriendControllerIT@1a3b1f7e]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@2558f65c testClass = ru.andreyszdlv.userservice.controller.FriendControllerIT, locations = [], classes = [ru.andreyszdlv.userservice.UserServiceApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@11c3ce6a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@2ef14fe, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@7331196b, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@4331d187, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@73194df, org.springframework.boot.test.context.SpringBootTestAnnotation@b404912f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' defined in class path resource [org/springframework/boot/autoconfigure/sql/init/DataSourceInitializationConfiguration.class]: Unsatisfied dependency expressed through method 'dataSourceScriptDatabaseInitializer' parameter 0: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:548)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1130)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:905)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)
	... 72 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:645)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:885)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)
	... 98 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:171)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 112 common frames omitted
Caused by: org.springframework.boot.autoconfigure.jdbc.DataSourceProperties$DataSourceBeanCreationException: Failed to determine a suitable driver class
	at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.determineDriverClassName(DataSourceProperties.java:182)
	at org.springframework.boot.autoconfigure.jdbc.DataSourceProperties.initializeDataSourceBuilder(DataSourceProperties.java:123)
	at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration.createDataSource(DataSourceConfiguration.java:48)
	at org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari.dataSource(DataSourceConfiguration.java:90)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.base/java.lang.reflect.Method.invoke(Method.java:568)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:139)
	... 113 common frames omitted
2024-10-23 18:17:48 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 18:17:48 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 18:17:50 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 18:17:50 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 17376 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 18:17:50 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 18:17:50 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 18:17:50 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 18:17:52 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 18:17:52 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 228 ms. Found 3 JPA repository interfaces.
2024-10-23 18:17:53 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 18:17:53 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 18:17:53 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 18:17:54 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 18:17:54 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 18:17:54 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4ba402b5
2024-10-23 18:17:54 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 18:17:54 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 18:17:56 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 18:17:56 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 18:17:57 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 18:17:57 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: f42c665f-b403-482a-a49e-95429ddc683c

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 18:17:58 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 18:17:58 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@304f4888, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@35b97c69, org.springframework.security.web.context.SecurityContextHolderFilter@3b386ba7, org.springframework.security.web.header.HeaderWriterFilter@627a1c77, org.springframework.web.filter.CorsFilter@2c07277f, org.springframework.security.web.authentication.logout.LogoutFilter@7b2f18cd, ru.andreyszdlv.userservice.filter.RoleUserFilter@1dc28c66, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@644e9953, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7b4e5982, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@d4df4ce, org.springframework.security.web.session.SessionManagementFilter@7bcd497, org.springframework.security.web.access.ExceptionTranslationFilter@42ea4bac, org.springframework.security.web.access.intercept.AuthorizationFilter@51ba8929]
2024-10-23 18:17:59 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 18:17:59 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 18:17:59 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 3 ms
2024-10-23 18:17:59 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 18:17:59 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 18:17:59 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 18:17:59 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 18:17:59 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 18:17:59 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729696679683
2024-10-23 18:17:59 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:17:59 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:17:59 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:17:59 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:00 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:00 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:00 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:00 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:00 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:00 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:01 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:01 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:02 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:02 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:03 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:03 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:05 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:05 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:06 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:06 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:07 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:07 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:08 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:08 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:09 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:09 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:10 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:10 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:11 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:11 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:12 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:12 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:13 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:13 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:14 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:14 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:15 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:15 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:16 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:16 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:18 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:18 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:19 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:19 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:20 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:20 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:21 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:21 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:22 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:22 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:23 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:23 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:24 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:24 WARN  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Connection to node -1 (localhost/127.0.0.1:9092) could not be established. Broker may not be available.
2024-10-23 18:18:26 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:26 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Cancelled in-flight API_VERSIONS request with correlation id 0 due to node -1 being disconnected (elapsed time since creation: 440ms, elapsed time since send: 440ms, request timeout: 3600000ms)
2024-10-23 18:18:27 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:27 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Cancelled in-flight API_VERSIONS request with correlation id 1 due to node -1 being disconnected (elapsed time since creation: 5ms, elapsed time since send: 5ms, request timeout: 3600000ms)
2024-10-23 18:18:28 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:28 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Cancelled in-flight API_VERSIONS request with correlation id 2 due to node -1 being disconnected (elapsed time since creation: 3ms, elapsed time since send: 3ms, request timeout: 3600000ms)
2024-10-23 18:18:29 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:29 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Cancelled in-flight API_VERSIONS request with correlation id 3 due to node -1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 3600000ms)
2024-10-23 18:18:29 INFO  o.a.k.c.a.i.AdminMetadataManager - [AdminClient clientId=adminclient-1] Metadata update failed
org.apache.kafka.common.errors.TimeoutException: Timed out waiting for a node assignment. Call: fetchMetadata
2024-10-23 18:18:29 ERROR o.s.kafka.core.KafkaAdmin - Could not configure topics
java.util.concurrent.TimeoutException: null
	at java.base/java.util.concurrent.CompletableFuture.timedGet(CompletableFuture.java:1960)
	at java.base/java.util.concurrent.CompletableFuture.get(CompletableFuture.java:2095)
	at org.apache.kafka.common.internals.KafkaFutureImpl.get(KafkaFutureImpl.java:180)
	at org.springframework.kafka.core.KafkaAdmin.initialize(KafkaAdmin.java:205)
	at org.springframework.kafka.core.KafkaAdmin.afterSingletonsInstantiated(KafkaAdmin.java:174)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:972)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
2024-10-23 18:18:30 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:30 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Cancelled in-flight API_VERSIONS request with correlation id 4 due to node -1 being disconnected (elapsed time since creation: 2ms, elapsed time since send: 2ms, request timeout: 3600000ms)
2024-10-23 18:18:31 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:31 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Cancelled in-flight API_VERSIONS request with correlation id 5 due to node -1 being disconnected (elapsed time since creation: 2ms, elapsed time since send: 2ms, request timeout: 3600000ms)
2024-10-23 18:18:32 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:32 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Cancelled in-flight API_VERSIONS request with correlation id 6 due to node -1 being disconnected (elapsed time since creation: 3ms, elapsed time since send: 3ms, request timeout: 3600000ms)
2024-10-23 18:18:33 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:33 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Cancelled in-flight API_VERSIONS request with correlation id 7 due to node -1 being disconnected (elapsed time since creation: 3ms, elapsed time since send: 3ms, request timeout: 3600000ms)
2024-10-23 18:18:34 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:34 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Cancelled in-flight API_VERSIONS request with correlation id 8 due to node -1 being disconnected (elapsed time since creation: 2ms, elapsed time since send: 2ms, request timeout: 3600000ms)
2024-10-23 18:18:36 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Node -1 disconnected.
2024-10-23 18:18:36 INFO  o.apache.kafka.clients.NetworkClient - [AdminClient clientId=adminclient-1] Cancelled in-flight API_VERSIONS request with correlation id 9 due to node -1 being disconnected (elapsed time since creation: 1ms, elapsed time since send: 1ms, request timeout: 3600000ms)
2024-10-23 18:18:37 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 18:18:37 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 18:18:37 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 18:18:37 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 18:18:37 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 18:18:37 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 18:18:37 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 18:18:37 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729696717562
2024-10-23 18:18:37 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 18:18:37 INFO  r.a.u.controller.FriendControllerIT - Started FriendControllerIT in 48.465 seconds (process running for 50.203)
2024-10-23 18:18:37 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 18:18:37 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 18:18:37 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 18:18:37 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 18:18:37 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 18:18:37 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 18:18:37 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 18:18:37 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 18:18:37 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 18:18:37 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 18:18:37 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 18:18:37 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 18:18:37 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 18:18:37 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 18:18:37 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 18:25:37 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 18:25:37 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 18:25:38 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 18:25:38 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 11484 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 18:25:38 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 18:25:38 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 18:25:38 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 18:25:40 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 18:25:40 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 231 ms. Found 3 JPA repository interfaces.
2024-10-23 18:25:41 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 18:25:41 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 18:25:41 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 18:25:42 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 18:25:42 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 18:25:42 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5ccc971e
2024-10-23 18:25:42 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 18:25:42 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 18:25:43 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 18:25:43 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 18:25:45 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 18:25:45 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 28c50665-a296-4a79-b078-0f6ce23c7f12

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 18:25:45 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 18:25:45 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@676b85f3, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@42fa1554, org.springframework.security.web.context.SecurityContextHolderFilter@798ac54d, org.springframework.security.web.header.HeaderWriterFilter@e620893, org.springframework.web.filter.CorsFilter@544502d6, org.springframework.security.web.authentication.logout.LogoutFilter@25c6f0fc, ru.andreyszdlv.userservice.filter.RoleUserFilter@33efa7d4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@42ea4bac, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@a683f92, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@382e7f70, org.springframework.security.web.session.SessionManagementFilter@245504d, org.springframework.security.web.access.ExceptionTranslationFilter@2461b519, org.springframework.security.web.access.intercept.AuthorizationFilter@18f7a872]
2024-10-23 18:25:46 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 18:25:46 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 18:25:46 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 4 ms
2024-10-23 18:25:46 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 18:25:46 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 18:25:47 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 18:25:47 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 18:25:47 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 18:25:47 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729697147238
2024-10-23 18:25:47 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 18:25:47 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 18:25:47 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 18:25:47 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 18:25:47 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 18:25:47 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 18:25:47 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 18:25:47 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729697147903
2024-10-23 18:25:47 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 18:25:47 INFO  r.a.u.controller.FriendControllerIT - Started FriendControllerIT in 10.439 seconds (process running for 12.152)
2024-10-23 18:25:47 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 18:25:47 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 18:25:47 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 18:25:47 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 18:25:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-f555ab00-2c8d-4b3d-a2ef-19d409618cf5
2024-10-23 18:25:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 18:25:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 18:25:48 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 18:25:48 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 18:25:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-f555ab00-2c8d-4b3d-a2ef-19d409618cf5 sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 18:25:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 18:25:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 18:25:48 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 18:25:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 18:25:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 18:25:51 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 18:25:51 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 18:25:51 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 18:25:51 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 18:25:51 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 18:25:51 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 18:25:51 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 18:25:51 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 18:27:27 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 18:27:27 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 18:27:28 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 18:27:28 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 1984 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 18:27:28 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 18:27:28 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 18:27:28 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 18:27:30 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 18:27:30 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 230 ms. Found 3 JPA repository interfaces.
2024-10-23 18:27:31 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 18:27:31 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 18:27:31 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 18:27:32 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 18:27:32 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 18:27:32 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7836c79
2024-10-23 18:27:32 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 18:27:32 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 18:27:33 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 18:27:33 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 18:27:35 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 18:27:35 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 4fe6e4ec-7511-4c94-951d-79be4fb3bd27

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 18:27:35 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 18:27:35 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@18e7b33e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3b386ba7, org.springframework.security.web.context.SecurityContextHolderFilter@a8dedda, org.springframework.security.web.header.HeaderWriterFilter@72d4d9ac, org.springframework.web.filter.CorsFilter@5a41183b, org.springframework.security.web.authentication.logout.LogoutFilter@a15e4fd, ru.andreyszdlv.userservice.filter.RoleUserFilter@45a40353, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@38a2fbc3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@51a6af38, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@644e9953, org.springframework.security.web.session.SessionManagementFilter@7953a656, org.springframework.security.web.access.ExceptionTranslationFilter@43051a8d, org.springframework.security.web.access.intercept.AuthorizationFilter@2a4137a2]
2024-10-23 18:27:36 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 18:27:36 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 18:27:36 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 4 ms
2024-10-23 18:27:36 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 18:27:36 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 18:27:37 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 18:27:37 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 18:27:37 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 18:27:37 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729697257252
2024-10-23 18:27:37 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 18:27:37 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 18:27:37 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 18:27:37 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 18:27:37 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 18:27:37 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 18:27:37 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 18:27:37 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729697257932
2024-10-23 18:27:37 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 18:27:37 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 18:27:37 INFO  r.a.u.controller.FriendControllerIT - Started FriendControllerIT in 10.543 seconds (process running for 12.2)
2024-10-23 18:27:37 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 18:27:37 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 18:27:37 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 18:27:38 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-5dc548a2-d2c6-4da4-b42e-2581e9169aca
2024-10-23 18:27:38 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 18:27:38 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 18:27:38 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 18:27:38 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 18:27:38 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-5dc548a2-d2c6-4da4-b42e-2581e9169aca sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 18:27:38 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 18:27:38 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 18:27:38 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 18:27:38 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 18:27:38 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 18:27:41 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 18:27:41 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 18:27:41 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 18:27:41 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 18:27:41 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 18:27:41 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 18:27:41 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 18:27:41 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 18:28:50 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 18:28:50 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 18:28:51 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 18:28:52 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 2232 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 18:28:52 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 18:28:52 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 18:28:52 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 18:28:53 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 18:28:54 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 225 ms. Found 3 JPA repository interfaces.
2024-10-23 18:28:54 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 18:28:55 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 18:28:55 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 18:28:55 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 18:28:55 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 18:28:56 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@f4d391c
2024-10-23 18:28:56 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 18:28:56 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 18:28:57 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 18:28:57 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 18:28:58 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 18:28:58 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: dfbaf5de-4aa4-4e93-977d-3454f63d939c

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 18:28:59 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 18:28:59 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7b2f18cd, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@18f7a872, org.springframework.security.web.context.SecurityContextHolderFilter@515c3dd2, org.springframework.security.web.header.HeaderWriterFilter@361d56a3, org.springframework.web.filter.CorsFilter@61defefb, org.springframework.security.web.authentication.logout.LogoutFilter@1263664f, ru.andreyszdlv.userservice.filter.RoleUserFilter@fc6cac6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6c9fe061, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@42ea4bac, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@648100de, org.springframework.security.web.session.SessionManagementFilter@6466e599, org.springframework.security.web.access.ExceptionTranslationFilter@57ae3c0e, org.springframework.security.web.access.intercept.AuthorizationFilter@2899745e]
2024-10-23 18:29:00 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 18:29:00 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 18:29:00 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2024-10-23 18:29:00 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 18:29:00 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 18:29:00 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 18:29:00 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 18:29:00 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 18:29:00 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729697340889
2024-10-23 18:29:01 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 18:29:01 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 18:29:01 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 18:29:01 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 18:29:01 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 18:29:01 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 18:29:01 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 18:29:01 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729697341617
2024-10-23 18:29:01 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 18:29:01 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 18:29:01 INFO  r.a.u.controller.FriendControllerIT - Started FriendControllerIT in 10.755 seconds (process running for 12.414)
2024-10-23 18:29:01 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 18:29:01 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 18:29:01 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 18:29:01 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-d2cea9f3-f2f8-4260-9467-b7b5fcf71c22
2024-10-23 18:29:01 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 18:29:01 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 18:29:02 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 18:29:02 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 18:29:02 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 18:29:02 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 18:29:02 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-d2cea9f3-f2f8-4260-9467-b7b5fcf71c22 sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 18:29:02 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 18:29:02 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 18:29:02 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 18:29:02 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 18:29:02 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 18:29:04 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 18:29:04 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 18:29:04 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 18:29:04 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 18:29:04 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 18:29:04 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 18:29:04 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 18:29:04 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 18:33:19 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 18:33:19 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 18:33:20 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 18:33:20 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 3928 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 18:33:20 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 18:33:20 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 18:33:20 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 18:33:22 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 18:33:22 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 218 ms. Found 3 JPA repository interfaces.
2024-10-23 18:33:23 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 18:33:24 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 18:33:24 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 18:33:24 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 18:33:24 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 18:33:25 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@72c5064f
2024-10-23 18:33:25 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 18:33:25 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 18:33:26 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 18:33:26 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 18:33:27 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 18:33:27 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: ab928b32-fe61-4702-9624-dcf218e8662f

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 18:33:28 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 18:33:28 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@64d7737c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@b632594, org.springframework.security.web.context.SecurityContextHolderFilter@204bd52d, org.springframework.security.web.header.HeaderWriterFilter@a6e0e5f, org.springframework.web.filter.CorsFilter@4c822e9b, org.springframework.security.web.authentication.logout.LogoutFilter@4b6cb083, ru.andreyszdlv.userservice.filter.RoleUserFilter@4a83d61c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2162b22d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@78571a17, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@24456c9e, org.springframework.security.web.session.SessionManagementFilter@274010fe, org.springframework.security.web.access.ExceptionTranslationFilter@5e9f4f76, org.springframework.security.web.access.intercept.AuthorizationFilter@6b909973]
2024-10-23 18:33:29 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 18:33:29 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 18:33:29 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2024-10-23 18:33:29 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 18:33:29 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 18:33:29 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 18:33:29 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 18:33:29 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 18:33:29 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729697609806
2024-10-23 18:33:30 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 18:33:30 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 18:33:30 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 18:33:30 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 18:33:30 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 18:33:30 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 18:33:30 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 18:33:30 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729697610485
2024-10-23 18:33:30 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 18:33:30 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 18:33:30 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 18:33:30 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 18:33:30 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 18:33:30 INFO  r.a.u.controller.FriendControllerIT - Started FriendControllerIT in 10.96 seconds (process running for 12.674)
2024-10-23 18:33:30 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-89362cea-e664-45d4-a5ec-bcae2c516f37
2024-10-23 18:33:30 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 18:33:30 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 18:33:30 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 18:33:30 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 18:33:30 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 18:33:30 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-89362cea-e664-45d4-a5ec-bcae2c516f37 sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 18:33:30 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 18:33:30 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 18:33:30 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 18:33:30 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 18:33:30 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 18:33:33 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 18:33:33 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 18:33:33 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 18:33:33 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 18:33:33 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 18:33:33 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 18:33:33 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 18:33:33 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 18:35:16 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 18:35:16 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 18:35:17 ERROR o.s.b.d.LoggingFailureAnalysisReporter - 

***************************
APPLICATION FAILED TO START
***************************

Description:

No spring.config.import property has been defined

Action:

Add a spring.config.import=configserver: property to your configuration.
	If configuration is not required add spring.config.import=optional:configserver: instead.
	To disable this check, set spring.cloud.config.enabled=false or 
	spring.cloud.config.import-check.enabled=false.

2024-10-23 18:35:17 ERROR o.s.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.web.ServletTestExecutionListener] to prepare test instance [ru.andreyszdlv.userservice.controller.FriendControllerIT@110844f6]
java.lang.IllegalStateException: Failed to load ApplicationContext for [WebMergedContextConfiguration@24e8de5c testClass = ru.andreyszdlv.userservice.controller.FriendControllerIT, locations = [], classes = [ru.andreyszdlv.userservice.UserServiceApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceLocations = [], propertySourceProperties = ["org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true"], contextCustomizers = [[ImportsContextCustomizer@64040287 key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.client.servlet.OAuth2ClientAutoConfiguration, org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.SecurityFilterAutoConfiguration, org.springframework.boot.autoconfigure.security.servlet.UserDetailsServiceAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityConfiguration, org.springframework.boot.test.autoconfigure.web.reactive.WebTestClientAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@764faa6, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@4f5991f6, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@7e89c759, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@39a2bb97, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@9da1, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@4b3fa0b3, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@335b5620, org.springframework.boot.test.context.SpringBootTestAnnotation@b404912f], resourceBasePath = "src/main/webapp", contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:142)
	at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127)
	at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191)
	at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130)
	at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241)
	at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377)
	at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
	at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
	at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
	at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
	at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278)
	at java.base/java.util.Optional.orElseGet(Optional.java:364)
	at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277)
	at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
Caused by: org.springframework.cloud.commons.ConfigDataMissingEnvironmentPostProcessor$ImportException: No spring.config.import set
	at org.springframework.cloud.commons.ConfigDataMissingEnvironmentPostProcessor.postProcessEnvironment(ConfigDataMissingEnvironmentPostProcessor.java:82)
	at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEnvironmentPreparedEvent(EnvironmentPostProcessorApplicationListener.java:109)
	at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEvent(EnvironmentPostProcessorApplicationListener.java:94)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)
	at org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)
	at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:81)
	at org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:64)
	at java.base/java.lang.Iterable.forEach(Iterable.java:75)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)
	at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:112)
	at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:63)
	at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:352)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:303)
	at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:59)
	at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:47)
	at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1386)
	at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:543)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
	at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184)
	at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118)
	... 72 common frames omitted
2024-10-23 18:37:28 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 18:37:28 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 18:37:29 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 18:37:29 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 16104 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 18:37:29 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 18:37:29 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 18:37:29 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 18:37:31 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 18:37:31 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 218 ms. Found 3 JPA repository interfaces.
2024-10-23 18:37:32 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 18:37:33 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 18:37:33 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 18:37:33 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 18:37:33 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 18:37:34 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@c6a3f47
2024-10-23 18:37:34 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 18:37:34 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 18:37:35 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 18:37:35 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 18:37:36 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 18:37:36 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 7eca4606-3ef0-4905-8c10-d2fd1b23f7fe

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 18:37:37 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 18:37:37 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5bb1c104, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1184b542, org.springframework.security.web.context.SecurityContextHolderFilter@3b8ec458, org.springframework.security.web.header.HeaderWriterFilter@6eda3ade, org.springframework.web.filter.CorsFilter@6bd5ca02, org.springframework.security.web.authentication.logout.LogoutFilter@22a7ff5d, ru.andreyszdlv.userservice.filter.RoleUserFilter@22db974d, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4704b66a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@60e2b6e3, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4758f533, org.springframework.security.web.session.SessionManagementFilter@7bd6a7f9, org.springframework.security.web.access.ExceptionTranslationFilter@328446e1, org.springframework.security.web.access.intercept.AuthorizationFilter@3afe1020]
2024-10-23 18:37:38 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 18:37:38 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 18:37:38 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2024-10-23 18:37:38 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 18:37:38 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 18:37:38 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 18:37:38 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 18:37:38 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 18:37:38 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729697858715
2024-10-23 18:37:39 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 18:37:39 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 18:37:39 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 18:37:39 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 18:37:39 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 18:37:39 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 18:37:39 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 18:37:39 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729697859386
2024-10-23 18:37:39 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 18:37:39 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 18:37:39 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 18:37:39 INFO  r.a.u.controller.FriendControllerIT - Started FriendControllerIT in 10.634 seconds (process running for 12.229)
2024-10-23 18:37:39 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 18:37:39 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 18:37:39 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-32d2c0de-870e-4e86-8e0a-474ba80d1c52
2024-10-23 18:37:39 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 18:37:39 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 18:37:39 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 18:37:39 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 18:37:39 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 18:37:39 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-32d2c0de-870e-4e86-8e0a-474ba80d1c52 sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 18:37:39 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 18:37:39 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 18:37:39 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 18:37:39 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 18:37:39 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 18:37:42 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 18:37:42 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 18:37:42 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 18:37:42 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 18:37:42 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 18:37:42 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 18:37:42 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 18:37:42 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 18:38:57 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 18:38:57 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 18:38:58 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 18:38:58 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 6632 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 18:38:58 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 18:38:58 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 18:38:58 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 18:39:00 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 18:39:00 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 207 ms. Found 3 JPA repository interfaces.
2024-10-23 18:39:01 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 18:39:02 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 18:39:02 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 18:39:02 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 18:39:02 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 18:39:03 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@27f31d91
2024-10-23 18:39:03 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 18:39:03 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 18:39:04 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 18:39:04 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 18:39:05 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 18:39:05 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: a5df05ed-3b10-4302-9ea0-68936f950332

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 18:39:05 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 18:39:05 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@184218af, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@e7423bb, org.springframework.security.web.context.SecurityContextHolderFilter@6baa673d, org.springframework.security.web.header.HeaderWriterFilter@57283e4, org.springframework.web.filter.CorsFilter@270663e2, org.springframework.security.web.authentication.logout.LogoutFilter@4f93816d, ru.andreyszdlv.userservice.filter.RoleUserFilter@52cda4bd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@22bd6b0a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@190ec769, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3987bfc8, org.springframework.security.web.session.SessionManagementFilter@6e92f150, org.springframework.security.web.access.ExceptionTranslationFilter@5baabba, org.springframework.security.web.access.intercept.AuthorizationFilter@17e03804]
2024-10-23 18:39:06 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 18:39:06 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 18:39:06 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2024-10-23 18:39:06 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 18:39:06 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 18:39:07 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 18:39:07 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 18:39:07 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 18:39:07 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729697947261
2024-10-23 18:39:07 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 18:39:07 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 18:39:07 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 18:39:07 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 18:39:07 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 18:39:07 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 18:39:07 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 18:39:07 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729697947914
2024-10-23 18:39:07 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 18:39:07 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 18:39:07 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 18:39:07 INFO  r.a.u.controller.FriendControllerIT - Started FriendControllerIT in 10.206 seconds (process running for 11.819)
2024-10-23 18:39:07 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 18:39:07 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 18:39:07 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-a64ab53d-d71f-47d5-894c-bf9389035eb2
2024-10-23 18:39:07 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 18:39:07 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 18:39:08 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 18:39:08 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 18:39:08 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 18:39:08 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 18:39:08 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-a64ab53d-d71f-47d5-894c-bf9389035eb2 sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 18:39:08 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 18:39:08 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 18:39:08 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 18:39:08 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 18:39:08 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 18:39:10 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 18:39:10 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 18:39:10 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 18:39:11 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 18:39:11 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 18:39:11 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 18:39:11 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 18:39:11 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 18:43:35 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 18:43:35 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 18:43:36 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 18:43:36 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 15720 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 18:43:36 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 18:43:36 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 18:43:36 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 18:43:38 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 18:43:38 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 223 ms. Found 3 JPA repository interfaces.
2024-10-23 18:43:39 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 18:43:40 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 18:43:40 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 18:43:40 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 18:43:41 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 18:43:41 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@445f6f73
2024-10-23 18:43:41 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 18:43:41 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 18:43:42 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 18:43:42 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 18:43:43 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 18:43:43 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: b7c48882-8bcb-42ef-b5c1-58255838fbb1

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 18:43:44 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 18:43:44 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7edb2a4b, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5811f080, org.springframework.security.web.context.SecurityContextHolderFilter@3ab2d64c, org.springframework.security.web.header.HeaderWriterFilter@19f007c4, org.springframework.web.filter.CorsFilter@355e1080, org.springframework.security.web.authentication.logout.LogoutFilter@14b3976, ru.andreyszdlv.userservice.filter.RoleUserFilter@c680819, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@40123014, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@28bf7bea, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2aef651, org.springframework.security.web.session.SessionManagementFilter@1fa35f7e, org.springframework.security.web.access.ExceptionTranslationFilter@4fe03c06, org.springframework.security.web.access.intercept.AuthorizationFilter@2d6161b9]
2024-10-23 18:43:44 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 18:43:44 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 18:43:44 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 4 ms
2024-10-23 18:43:45 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 18:43:45 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 18:43:45 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 18:43:45 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 18:43:45 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 18:43:45 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729698225620
2024-10-23 18:43:46 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 18:43:46 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 18:43:46 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 18:43:46 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 18:43:46 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 18:43:46 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 18:43:46 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 18:43:46 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729698226306
2024-10-23 18:43:46 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 18:43:46 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 18:43:46 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 18:43:46 INFO  r.a.u.controller.FriendControllerIT - Started FriendControllerIT in 10.627 seconds (process running for 12.368)
2024-10-23 18:43:46 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 18:43:46 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 18:43:46 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-5b9447b3-267d-496d-9c0e-63b79b898198
2024-10-23 18:43:46 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 18:43:46 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 18:43:46 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 18:43:46 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 18:43:46 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 18:43:46 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 18:43:46 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 18:43:46 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 18:43:46 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-5b9447b3-267d-496d-9c0e-63b79b898198 sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 18:43:46 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 18:43:46 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 18:43:46 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 18:43:46 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 18:43:46 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 18:43:49 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 18:43:49 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 18:43:49 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 18:43:49 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 18:43:49 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 18:43:49 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 18:43:49 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 18:43:49 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 19:02:12 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 19:02:13 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 19:02:14 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 19:02:14 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 19736 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 19:02:14 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 19:02:14 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 19:02:14 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 19:02:16 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 19:02:16 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 213 ms. Found 3 JPA repository interfaces.
2024-10-23 19:02:16 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 19:02:18 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 19:02:18 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 19:02:18 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 19:02:18 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 19:02:18 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4c05f83b
2024-10-23 19:02:18 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 19:02:18 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 19:02:19 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 19:02:19 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 19:02:20 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 19:02:20 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 669277d6-cbda-4b8b-8dfd-e95fd61461dc

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 19:02:21 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 19:02:21 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@66df2165, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@41cec7b0, org.springframework.security.web.context.SecurityContextHolderFilter@280d20fb, org.springframework.security.web.header.HeaderWriterFilter@38911759, org.springframework.web.filter.CorsFilter@62065d12, org.springframework.security.web.authentication.logout.LogoutFilter@1455d0f5, ru.andreyszdlv.userservice.filter.RoleUserFilter@752573df, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2048255a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@435a13ac, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5523f107, org.springframework.security.web.session.SessionManagementFilter@14738629, org.springframework.security.web.access.ExceptionTranslationFilter@25bd8eab, org.springframework.security.web.access.intercept.AuthorizationFilter@5545c42]
2024-10-23 19:02:21 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 19:02:21 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 19:02:21 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2024-10-23 19:02:22 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 19:02:22 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 19:02:22 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 19:02:22 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 19:02:22 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 19:02:22 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729699342508
2024-10-23 19:02:23 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 19:02:23 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 19:02:23 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 19:02:23 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 19:02:23 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 19:02:23 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 19:02:23 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 19:02:23 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729699343153
2024-10-23 19:02:23 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 19:02:23 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 19:02:23 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 19:02:23 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 19:02:23 INFO  r.a.u.controller.FriendControllerIT - Started FriendControllerIT in 9.939 seconds (process running for 11.629)
2024-10-23 19:02:23 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 19:02:23 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-4cdfe9ea-0769-4f46-bf32-d58d146d40f9
2024-10-23 19:02:23 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 19:02:23 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 19:02:23 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 19:02:23 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 19:02:23 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 19:02:23 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 19:02:23 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 19:02:23 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 19:02:23 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-4cdfe9ea-0769-4f46-bf32-d58d146d40f9 sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 19:02:23 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 19:02:23 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 19:02:23 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 19:02:23 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 19:02:23 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 19:02:26 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 19:02:26 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 19:02:26 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 19:02:26 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 19:02:26 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 19:02:26 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 19:02:26 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 19:02:26 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 19:02:46 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 19:02:46 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 19:02:47 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 19:02:47 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 12136 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 19:02:47 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 19:02:48 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 19:02:48 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 19:02:49 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 19:02:50 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 230 ms. Found 3 JPA repository interfaces.
2024-10-23 19:02:50 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 19:02:51 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 19:02:51 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 19:02:51 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 19:02:52 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 19:02:52 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@247a8411
2024-10-23 19:02:52 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 19:02:52 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 19:02:53 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 19:02:53 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 19:02:54 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 19:02:54 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: d492150d-f495-46be-94cb-92c824e8e3c9

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 19:02:54 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 19:02:54 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2493f9a8, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@b7e53b1, org.springframework.security.web.context.SecurityContextHolderFilter@3e94a6f6, org.springframework.security.web.header.HeaderWriterFilter@25a2a71d, org.springframework.web.filter.CorsFilter@5545c42, org.springframework.security.web.authentication.logout.LogoutFilter@5f9b37b5, ru.andreyszdlv.userservice.filter.RoleUserFilter@6e8426aa, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@14738629, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@20c7a91d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2420e962, org.springframework.security.web.session.SessionManagementFilter@2fba15c5, org.springframework.security.web.access.ExceptionTranslationFilter@56929ce, org.springframework.security.web.access.intercept.AuthorizationFilter@56554e7]
2024-10-23 19:02:55 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 19:02:55 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 19:02:55 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2024-10-23 19:02:55 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 19:02:56 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 19:02:56 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 19:02:56 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 19:02:56 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 19:02:56 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729699376392
2024-10-23 19:02:57 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 19:02:57 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 19:02:57 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 19:02:57 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 19:02:57 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 19:02:57 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 19:02:57 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 19:02:57 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729699377118
2024-10-23 19:02:57 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 19:02:57 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 19:02:57 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 19:02:57 INFO  r.a.u.controller.FriendControllerIT - Started FriendControllerIT in 10.428 seconds (process running for 12.191)
2024-10-23 19:02:57 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 19:02:57 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 19:02:57 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-f3eba9ab-06c7-4f03-9f15-afdec5e589c0
2024-10-23 19:02:57 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 19:02:57 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 19:02:57 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 19:02:57 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 19:02:57 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 19:02:57 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 19:02:57 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 19:02:57 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 19:02:57 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-f3eba9ab-06c7-4f03-9f15-afdec5e589c0 sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 19:02:57 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 19:02:57 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 19:02:57 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 19:02:57 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 19:02:57 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 19:03:00 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 19:03:00 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 19:03:00 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 19:03:00 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 19:03:00 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 19:03:00 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 19:03:00 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 19:03:00 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 19:03:28 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 19:03:28 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 19:03:29 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 19:03:29 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 14792 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 19:03:29 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 19:03:29 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 19:03:29 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 19:03:31 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 19:03:31 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 171 ms. Found 3 JPA repository interfaces.
2024-10-23 19:03:32 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 19:03:33 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 19:03:33 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 19:03:33 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 19:03:33 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 19:03:34 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@247a8411
2024-10-23 19:03:34 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 19:03:34 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 19:03:34 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 19:03:34 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 19:03:35 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 19:03:35 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: fa630a46-5f6d-4e2f-bc9d-74ccbfa55d8b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 19:03:36 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 19:03:36 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@7a68818c, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@11034fdb, org.springframework.security.web.context.SecurityContextHolderFilter@7b3db079, org.springframework.security.web.header.HeaderWriterFilter@72e806, org.springframework.web.filter.CorsFilter@276ae21c, org.springframework.security.web.authentication.logout.LogoutFilter@15d18b61, ru.andreyszdlv.userservice.filter.RoleUserFilter@6e8426aa, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5b7e2a88, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@14bb16ee, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1a524c6b, org.springframework.security.web.session.SessionManagementFilter@61ee9672, org.springframework.security.web.access.ExceptionTranslationFilter@58885a2e, org.springframework.security.web.access.intercept.AuthorizationFilter@1bce19db]
2024-10-23 19:03:37 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 19:03:37 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 19:03:37 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2024-10-23 19:03:37 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 19:03:37 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 19:03:37 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 19:03:37 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 19:03:37 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 19:03:37 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729699417683
2024-10-23 19:03:38 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 19:03:38 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 19:03:38 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 19:03:38 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 19:03:38 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 19:03:38 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 19:03:38 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 19:03:38 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729699418375
2024-10-23 19:03:38 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 19:03:38 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 19:03:38 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 19:03:38 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 19:03:38 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 19:03:38 INFO  r.a.u.controller.FriendControllerIT - Started FriendControllerIT in 9.717 seconds (process running for 11.384)
2024-10-23 19:03:38 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-055e9c7d-2def-4016-854c-bf2c596ef54f
2024-10-23 19:03:38 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 19:03:38 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 19:03:38 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 19:03:38 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 19:03:38 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 19:03:38 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 19:03:38 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 19:03:38 INFO  r.a.u.service.TempFriendService - Request me already send checking: userId=1, friendId=2
2024-10-23 19:03:38 INFO  r.a.u.service.TempFriendService - Saving request: userId=1, friendId=2
2024-10-23 19:03:38 INFO  r.a.u.controller.FriendController - Successfully created request for userId: 1, friendId: 2
2024-10-23 19:03:38 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: message.ok.create_request_friend
2024-10-23 19:03:38 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 19:03:38 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 19:03:38 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 19:03:38 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 19:03:38 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 19:03:38 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 19:03:38 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-055e9c7d-2def-4016-854c-bf2c596ef54f sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 19:03:38 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 19:03:38 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 19:03:38 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 19:03:38 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 19:03:38 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 19:03:41 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 19:03:41 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 19:03:41 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 19:03:41 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 19:03:41 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 19:03:41 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 19:03:41 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 19:03:41 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 19:04:21 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 19:04:21 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 19:04:23 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 19:04:23 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 10108 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 19:04:23 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 19:04:23 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 19:04:23 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 19:04:25 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 19:04:25 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 226 ms. Found 3 JPA repository interfaces.
2024-10-23 19:04:26 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 19:04:27 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 19:04:27 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 19:04:27 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 19:04:27 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 19:04:28 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6c4e486e
2024-10-23 19:04:28 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 19:04:28 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 19:04:29 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 19:04:29 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 19:04:29 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 19:04:29 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: e0d84e81-94f6-4777-bc0f-ad8608b1dd46

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 19:04:30 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 19:04:30 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@1b7c1c6f, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5f9b37b5, org.springframework.security.web.context.SecurityContextHolderFilter@c9518ee, org.springframework.security.web.header.HeaderWriterFilter@7b3db079, org.springframework.web.filter.CorsFilter@2f5a23c1, org.springframework.security.web.authentication.logout.LogoutFilter@435a13ac, ru.andreyszdlv.userservice.filter.RoleUserFilter@62d818c6, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@28833fff, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6e1d939e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@17abef0f, org.springframework.security.web.session.SessionManagementFilter@598f065f, org.springframework.security.web.access.ExceptionTranslationFilter@361065d1, org.springframework.security.web.access.intercept.AuthorizationFilter@33fefbbe]
2024-10-23 19:04:31 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 19:04:31 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 19:04:31 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 6 ms
2024-10-23 19:04:31 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 19:04:32 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 19:04:32 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 19:04:32 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 19:04:32 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 19:04:32 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729699472553
2024-10-23 19:04:33 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 19:04:33 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 19:04:33 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 19:04:33 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 19:04:33 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 19:04:33 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 19:04:33 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 19:04:33 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729699473345
2024-10-23 19:04:33 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 19:04:33 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 19:04:33 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 19:04:33 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 19:04:33 INFO  r.a.u.controller.FriendControllerIT - Started FriendControllerIT in 11.525 seconds (process running for 13.745)
2024-10-23 19:04:33 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 19:04:33 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-1dde3507-490c-4cbf-a830-315d5664ee37
2024-10-23 19:04:33 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 19:04:33 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 19:04:33 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 19:04:33 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 19:04:33 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 19:04:33 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 19:04:33 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 19:04:33 INFO  r.a.u.service.TempFriendService - Request me already send checking: userId=1, friendId=2
2024-10-23 19:04:33 INFO  r.a.u.service.TempFriendService - Saving request: userId=1, friendId=2
2024-10-23 19:04:33 INFO  r.a.u.controller.FriendController - Successfully created request for userId: 1, friendId: 2
2024-10-23 19:04:33 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: message.ok.create_request_friend
2024-10-23 19:04:33 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 19:04:33 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 19:04:33 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 19:04:33 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 19:04:33 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 19:04:33 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 19:04:33 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-1dde3507-490c-4cbf-a830-315d5664ee37 sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 19:04:33 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 19:04:33 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 19:04:33 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 19:04:33 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 19:04:33 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 19:04:36 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 19:04:36 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 19:04:36 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 19:04:36 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 19:04:36 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 19:04:36 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 19:04:36 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 19:04:36 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 19:08:18 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 19:08:18 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 19:08:19 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 19:08:19 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 17568 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 19:08:19 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 19:08:19 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 19:08:19 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 19:08:21 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 19:08:21 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 215 ms. Found 3 JPA repository interfaces.
2024-10-23 19:08:22 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 19:08:23 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 19:08:23 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 19:08:23 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 19:08:24 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 19:08:24 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4a0ee0ba
2024-10-23 19:08:24 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 19:08:24 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 19:08:25 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 19:08:25 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 19:08:25 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 19:08:25 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 3031cfaa-2d93-4504-b67c-66539458e1f0

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 19:08:26 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 19:08:26 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@435a13ac, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@38007ead, org.springframework.security.web.context.SecurityContextHolderFilter@5ba4735c, org.springframework.security.web.header.HeaderWriterFilter@713323a3, org.springframework.web.filter.CorsFilter@5de15ce1, org.springframework.security.web.authentication.logout.LogoutFilter@25bd8eab, ru.andreyszdlv.userservice.filter.RoleUserFilter@1d3bf0af, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@f1b0658, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@361065d1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@33544cc5, org.springframework.security.web.session.SessionManagementFilter@495c4ce7, org.springframework.security.web.access.ExceptionTranslationFilter@52d202f0, org.springframework.security.web.access.intercept.AuthorizationFilter@7e00a43e]
2024-10-23 19:08:27 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 19:08:27 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 19:08:27 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 4 ms
2024-10-23 19:08:27 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 19:08:27 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 19:08:27 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 19:08:28 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 19:08:28 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 19:08:28 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729699708185
2024-10-23 19:08:28 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 19:08:28 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 19:08:28 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 19:08:28 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 19:08:28 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 19:08:28 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 19:08:28 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 19:08:28 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729699708862
2024-10-23 19:08:28 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 19:08:28 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 19:08:28 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 19:08:28 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 19:08:28 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 19:08:28 INFO  r.a.u.controller.FriendControllerIT - Started FriendControllerIT in 10.296 seconds (process running for 12.021)
2024-10-23 19:08:28 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-5ba81ecc-3724-449c-9f0f-cd26ecb9830f
2024-10-23 19:08:28 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 19:08:28 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 19:08:29 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 19:08:29 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 19:08:29 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 19:08:29 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 19:08:29 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 19:08:29 INFO  r.a.u.service.TempFriendService - Request me already send checking: userId=1, friendId=2
2024-10-23 19:08:29 INFO  r.a.u.service.TempFriendService - Saving request: userId=1, friendId=2
2024-10-23 19:08:29 INFO  r.a.u.controller.FriendController - Successfully created request for userId: 1, friendId: 2
2024-10-23 19:08:29 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: message.ok.create_request_friend
2024-10-23 19:08:29 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 19:08:29 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 19:08:29 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 19:08:29 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 19:08:29 ERROR r.a.u.service.TempFriendService - Users with userId=1 and friendId=2 are already friends
2024-10-23 19:08:29 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 19:08:29 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.users_already_friends
2024-10-23 19:08:29 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Пользователи уже друзья', instance='null', properties='null']
2024-10-23 19:08:29 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 19:08:29 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 19:08:29 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 19:08:29 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 19:08:29 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 19:08:29 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 19:08:29 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 19:08:29 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 19:08:29 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 19:08:29 INFO  r.a.u.service.TempFriendService - Request me already send checking: userId=1, friendId=2
2024-10-23 19:08:29 ERROR r.a.u.service.TempFriendService - Request me already send: userId=1, friendId=2
2024-10-23 19:08:29 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 19:08:29 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.request_me_already_send
2024-10-23 19:08:29 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Заявка в друзья от этого пользователя вам уже отправлена', instance='null', properties='null']
2024-10-23 19:08:29 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 19:08:29 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 19:08:29 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 19:08:29 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 19:08:29 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 19:08:29 ERROR r.a.u.service.TempFriendService - Request already send: userId=1, friendId=2
2024-10-23 19:08:29 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 19:08:29 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.request_already_send
2024-10-23 19:08:29 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Заявка в друзья уже отправлена', instance='null', properties='null']
2024-10-23 19:08:29 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 19:08:29 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 19:08:29 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-5ba81ecc-3724-449c-9f0f-cd26ecb9830f sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 19:08:29 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 19:08:29 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 19:08:29 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 19:08:29 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 19:08:29 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 19:08:31 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 19:08:31 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 19:08:31 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 19:08:31 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 19:08:31 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 19:08:31 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 19:08:31 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 19:08:31 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 19:18:38 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 19:18:38 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 19:18:39 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 19:18:39 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 6192 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 19:18:39 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 19:18:39 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 19:18:39 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 19:18:41 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 19:18:42 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 252 ms. Found 3 JPA repository interfaces.
2024-10-23 19:18:42 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 19:18:43 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 19:18:43 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 19:18:43 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 19:18:44 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 19:18:44 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@140cfc5f
2024-10-23 19:18:44 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 19:18:44 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 19:18:45 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 19:18:45 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 19:18:45 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 19:18:45 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 220cd842-cce7-4b3e-b202-137e0f4f7764

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 19:18:46 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 19:18:46 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@3453cf27, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6ecf239d, org.springframework.security.web.context.SecurityContextHolderFilter@1bce19db, org.springframework.security.web.header.HeaderWriterFilter@41ff98dc, org.springframework.web.filter.CorsFilter@5f9cb96f, org.springframework.security.web.authentication.logout.LogoutFilter@792a9cb1, ru.andreyszdlv.userservice.filter.RoleUserFilter@6c04310f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5d3c0735, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1a524c6b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@45295bed, org.springframework.security.web.session.SessionManagementFilter@5de15ce1, org.springframework.security.web.access.ExceptionTranslationFilter@2787abe4, org.springframework.security.web.access.intercept.AuthorizationFilter@6ca6cc1c]
2024-10-23 19:18:47 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 19:18:47 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 19:18:47 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 3 ms
2024-10-23 19:18:47 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 19:18:47 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 19:18:47 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 19:18:48 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 19:18:48 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 19:18:48 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729700328138
2024-10-23 19:18:48 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 19:18:48 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 19:18:48 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 19:18:48 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 19:18:48 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 19:18:48 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 19:18:48 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 19:18:48 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729700328797
2024-10-23 19:18:48 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 19:18:48 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 19:18:48 INFO  r.a.u.controller.FriendControllerIT - Started FriendControllerIT in 10.076 seconds (process running for 11.616)
2024-10-23 19:18:48 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 19:18:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 19:18:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 19:18:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-4f99d2ba-a216-41f1-a7d1-bc2a85314d86
2024-10-23 19:18:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 19:18:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 19:18:49 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 19:18:49 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 19:18:49 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 19:18:49 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 19:18:49 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 19:18:49 INFO  r.a.u.service.TempFriendService - Request me already send checking: userId=1, friendId=2
2024-10-23 19:18:49 ERROR r.a.u.service.TempFriendService - Request me already send: userId=1, friendId=2
2024-10-23 19:18:49 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 19:18:49 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.request_me_already_send
2024-10-23 19:18:49 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Заявка в друзья от этого пользователя вам уже отправлена', instance='null', properties='null']
2024-10-23 19:18:49 WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void ru.andreyszdlv.userservice.controller.FriendControllerIT.createRequestFriend_Returns409_WhenRequestMeAlreadySend() throws java.lang.Exception] and test instance [ru.andreyszdlv.userservice.controller.FriendControllerIT@484a91f5]
org.mockito.exceptions.misusing.InvalidUseOfMatchersException: 
Misplaced or misused argument matcher detected here:

-> at ru.andreyszdlv.userservice.controller.FriendControllerIT.createRequestFriend_Returns409_WhenRequestMeAlreadySend(FriendControllerIT.java:164)

You cannot use argument matchers outside of verification or stubbing.
Examples of correct usage of argument matchers:
    when(mock.get(anyInt())).thenReturn(null);
    doThrow(new RuntimeException()).when(mock).someVoidMethod(any());
    verify(mock).someMethod(contains("foo"))

This message may appear after an NullPointerException if the last matcher is returning an object 
like any() but the stubbed method signature expect a primitive argument, in this case,
use primitive alternatives.
    when(mock.get(any())); // bad use, will raise NPE
    when(mock.get(anyInt())); // correct usage use

Also, this error might show up because you use argument matchers with methods that cannot be mocked.
Following methods *cannot* be stubbed/verified: final/private/equals()/hashCode().
Mocking methods declared on non-public parent classes is not supported.

	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:84)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:71)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:65)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:440)
	at org.springframework.test.context.junit.jupiter.SpringExtension.afterEach(SpringExtension.java:206)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAfterEachCallbacks$12(TestMethodTestDescriptor.java:260)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$13(TestMethodTestDescriptor.java:276)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$14(TestMethodTestDescriptor.java:276)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAllAfterMethodsOrCallbacks(TestMethodTestDescriptor.java:275)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAfterEachCallbacks(TestMethodTestDescriptor.java:259)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:144)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
2024-10-23 19:18:49 INFO  r.a.u.controller.FriendController - Executing confirmRequestFriend for userId: 1, friendId: 2
2024-10-23 19:18:49 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-23 19:18:49 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-23 19:18:49 INFO  r.a.u.service.FriendService - Saving friends for userId=1, friendId=2
2024-10-23 19:18:49 INFO  r.a.u.service.FriendService - Deleting request friendship for userId=1, friendId=2
2024-10-23 19:18:49 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: message.ok.confirm_request
2024-10-23 19:18:49 WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void ru.andreyszdlv.userservice.controller.FriendControllerIT.confirmRequestFriend_Returns201_WhenRequestExist() throws java.lang.Exception] and test instance [ru.andreyszdlv.userservice.controller.FriendControllerIT@49c51eb7]
org.mockito.exceptions.misusing.InvalidUseOfMatchersException: 
Misplaced or misused argument matcher detected here:

-> at ru.andreyszdlv.userservice.controller.FriendControllerIT.confirmRequestFriend_Returns201_WhenRequestExist(FriendControllerIT.java:180)

You cannot use argument matchers outside of verification or stubbing.
Examples of correct usage of argument matchers:
    when(mock.get(anyInt())).thenReturn(null);
    doThrow(new RuntimeException()).when(mock).someVoidMethod(any());
    verify(mock).someMethod(contains("foo"))

This message may appear after an NullPointerException if the last matcher is returning an object 
like any() but the stubbed method signature expect a primitive argument, in this case,
use primitive alternatives.
    when(mock.get(any())); // bad use, will raise NPE
    when(mock.get(anyInt())); // correct usage use

Also, this error might show up because you use argument matchers with methods that cannot be mocked.
Following methods *cannot* be stubbed/verified: final/private/equals()/hashCode().
Mocking methods declared on non-public parent classes is not supported.

	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:84)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:71)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:65)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:440)
	at org.springframework.test.context.junit.jupiter.SpringExtension.afterEach(SpringExtension.java:206)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAfterEachCallbacks$12(TestMethodTestDescriptor.java:260)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$13(TestMethodTestDescriptor.java:276)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$14(TestMethodTestDescriptor.java:276)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAllAfterMethodsOrCallbacks(TestMethodTestDescriptor.java:275)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAfterEachCallbacks(TestMethodTestDescriptor.java:259)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:144)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
2024-10-23 19:18:49 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 19:18:49 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 19:18:49 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 19:18:49 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 19:18:49 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 19:18:49 INFO  r.a.u.service.TempFriendService - Request me already send checking: userId=1, friendId=2
2024-10-23 19:18:49 INFO  r.a.u.service.TempFriendService - Saving request: userId=1, friendId=2
2024-10-23 19:18:49 INFO  r.a.u.controller.FriendController - Successfully created request for userId: 1, friendId: 2
2024-10-23 19:18:49 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: message.ok.create_request_friend
2024-10-23 19:18:49 WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [void ru.andreyszdlv.userservice.controller.FriendControllerIT.createRequestFriend_Returned201_WhenRequestCreate() throws java.lang.Exception] and test instance [ru.andreyszdlv.userservice.controller.FriendControllerIT@4fc50fee]
org.mockito.exceptions.misusing.InvalidUseOfMatchersException: 
Misplaced or misused argument matcher detected here:

-> at ru.andreyszdlv.userservice.controller.FriendControllerIT.createRequestFriend_Returned201_WhenRequestCreate(FriendControllerIT.java:113)

You cannot use argument matchers outside of verification or stubbing.
Examples of correct usage of argument matchers:
    when(mock.get(anyInt())).thenReturn(null);
    doThrow(new RuntimeException()).when(mock).someVoidMethod(any());
    verify(mock).someMethod(contains("foo"))

This message may appear after an NullPointerException if the last matcher is returning an object 
like any() but the stubbed method signature expect a primitive argument, in this case,
use primitive alternatives.
    when(mock.get(any())); // bad use, will raise NPE
    when(mock.get(anyInt())); // correct usage use

Also, this error might show up because you use argument matchers with methods that cannot be mocked.
Following methods *cannot* be stubbed/verified: final/private/equals()/hashCode().
Mocking methods declared on non-public parent classes is not supported.

	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:84)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:71)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:65)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:440)
	at org.springframework.test.context.junit.jupiter.SpringExtension.afterEach(SpringExtension.java:206)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAfterEachCallbacks$12(TestMethodTestDescriptor.java:260)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$13(TestMethodTestDescriptor.java:276)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$14(TestMethodTestDescriptor.java:276)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAllAfterMethodsOrCallbacks(TestMethodTestDescriptor.java:275)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAfterEachCallbacks(TestMethodTestDescriptor.java:259)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:144)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
2024-10-23 19:18:49 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 19:18:49 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 19:18:49 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 19:18:49 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 19:18:49 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 19:18:49 ERROR r.a.u.service.TempFriendService - Request already send: userId=1, friendId=2
2024-10-23 19:18:49 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 19:18:49 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.request_already_send
2024-10-23 19:18:49 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Заявка в друзья уже отправлена', instance='null', properties='null']
2024-10-23 19:18:49 WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void ru.andreyszdlv.userservice.controller.FriendControllerIT.createRequestFriend_Returns409_WhenRequestAlreadySend() throws java.lang.Exception] and test instance [ru.andreyszdlv.userservice.controller.FriendControllerIT@4d768435]
org.mockito.exceptions.misusing.InvalidUseOfMatchersException: 
Misplaced or misused argument matcher detected here:

-> at ru.andreyszdlv.userservice.controller.FriendControllerIT.createRequestFriend_Returns409_WhenRequestAlreadySend(FriendControllerIT.java:146)

You cannot use argument matchers outside of verification or stubbing.
Examples of correct usage of argument matchers:
    when(mock.get(anyInt())).thenReturn(null);
    doThrow(new RuntimeException()).when(mock).someVoidMethod(any());
    verify(mock).someMethod(contains("foo"))

This message may appear after an NullPointerException if the last matcher is returning an object 
like any() but the stubbed method signature expect a primitive argument, in this case,
use primitive alternatives.
    when(mock.get(any())); // bad use, will raise NPE
    when(mock.get(anyInt())); // correct usage use

Also, this error might show up because you use argument matchers with methods that cannot be mocked.
Following methods *cannot* be stubbed/verified: final/private/equals()/hashCode().
Mocking methods declared on non-public parent classes is not supported.

	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:84)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:71)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:65)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:440)
	at org.springframework.test.context.junit.jupiter.SpringExtension.afterEach(SpringExtension.java:206)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAfterEachCallbacks$12(TestMethodTestDescriptor.java:260)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$13(TestMethodTestDescriptor.java:276)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$14(TestMethodTestDescriptor.java:276)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAllAfterMethodsOrCallbacks(TestMethodTestDescriptor.java:275)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAfterEachCallbacks(TestMethodTestDescriptor.java:259)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:144)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
2024-10-23 19:18:49 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 19:18:49 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 19:18:49 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 19:18:49 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 19:18:49 ERROR r.a.u.service.TempFriendService - Users with userId=1 and friendId=2 are already friends
2024-10-23 19:18:49 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 19:18:49 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.users_already_friends
2024-10-23 19:18:49 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Пользователи уже друзья', instance='null', properties='null']
2024-10-23 19:18:49 WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void ru.andreyszdlv.userservice.controller.FriendControllerIT.createRequestFriend_Returns409_WhenUsersAlreadyFriends() throws java.lang.Exception] and test instance [ru.andreyszdlv.userservice.controller.FriendControllerIT@3048ec86]
org.mockito.exceptions.misusing.InvalidUseOfMatchersException: 
Misplaced or misused argument matcher detected here:

-> at ru.andreyszdlv.userservice.controller.FriendControllerIT.createRequestFriend_Returns409_WhenUsersAlreadyFriends(FriendControllerIT.java:129)

You cannot use argument matchers outside of verification or stubbing.
Examples of correct usage of argument matchers:
    when(mock.get(anyInt())).thenReturn(null);
    doThrow(new RuntimeException()).when(mock).someVoidMethod(any());
    verify(mock).someMethod(contains("foo"))

This message may appear after an NullPointerException if the last matcher is returning an object 
like any() but the stubbed method signature expect a primitive argument, in this case,
use primitive alternatives.
    when(mock.get(any())); // bad use, will raise NPE
    when(mock.get(anyInt())); // correct usage use

Also, this error might show up because you use argument matchers with methods that cannot be mocked.
Following methods *cannot* be stubbed/verified: final/private/equals()/hashCode().
Mocking methods declared on non-public parent classes is not supported.

	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:84)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:71)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:65)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:440)
	at org.springframework.test.context.junit.jupiter.SpringExtension.afterEach(SpringExtension.java:206)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAfterEachCallbacks$12(TestMethodTestDescriptor.java:260)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$13(TestMethodTestDescriptor.java:276)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$14(TestMethodTestDescriptor.java:276)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAllAfterMethodsOrCallbacks(TestMethodTestDescriptor.java:275)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAfterEachCallbacks(TestMethodTestDescriptor.java:259)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:144)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
2024-10-23 19:18:49 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 19:18:49 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 19:18:49 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 19:18:49 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 19:18:49 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 19:18:49 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 19:18:49 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-4f99d2ba-a216-41f1-a7d1-bc2a85314d86 sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 19:18:49 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 19:18:49 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 19:18:49 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 19:18:49 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 19:18:49 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 19:18:51 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 19:18:51 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 19:18:51 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 19:18:51 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 19:18:51 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 19:18:51 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 19:18:51 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 19:18:51 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 19:25:24 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 19:25:24 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 19:25:25 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 19:25:25 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 16968 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 19:25:25 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 19:25:25 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 19:25:25 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 19:25:27 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 19:25:27 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 220 ms. Found 3 JPA repository interfaces.
2024-10-23 19:25:28 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 19:25:29 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 19:25:29 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 19:25:29 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 19:25:30 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 19:25:30 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4cd9ee2c
2024-10-23 19:25:30 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 19:25:30 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 19:25:31 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 19:25:31 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 19:25:31 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 19:25:31 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 4d4228f7-b79a-476b-bd0c-469548ebcf4f

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 19:25:32 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 19:25:32 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6aefb242, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1455d0f5, org.springframework.security.web.context.SecurityContextHolderFilter@5fd0235c, org.springframework.security.web.header.HeaderWriterFilter@3e3b41cb, org.springframework.web.filter.CorsFilter@5c4e86e7, org.springframework.security.web.authentication.logout.LogoutFilter@1bce19db, ru.andreyszdlv.userservice.filter.RoleUserFilter@2d541e01, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@56929ce, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6bca3b27, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@48a2fb11, org.springframework.security.web.session.SessionManagementFilter@28833fff, org.springframework.security.web.access.ExceptionTranslationFilter@6984f7d1, org.springframework.security.web.access.intercept.AuthorizationFilter@2f5a23c1]
2024-10-23 19:25:33 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 19:25:33 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 19:25:33 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 2 ms
2024-10-23 19:25:33 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 19:25:33 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 19:25:33 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 19:25:34 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 19:25:34 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 19:25:34 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729700734113
2024-10-23 19:25:34 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 19:25:34 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 19:25:34 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 19:25:34 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 19:25:34 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 19:25:34 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 19:25:34 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 19:25:34 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729700734791
2024-10-23 19:25:34 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 19:25:34 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 19:25:34 INFO  r.a.u.controller.FriendControllerIT - Started FriendControllerIT in 10.305 seconds (process running for 11.867)
2024-10-23 19:25:34 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 19:25:34 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 19:25:34 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 19:25:34 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-c19b9d1c-7095-42db-bebe-9067e5ca000d
2024-10-23 19:25:34 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 19:25:34 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 19:25:35 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 19:25:35 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 19:25:35 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 19:25:35 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 19:25:35 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 19:25:35 INFO  r.a.u.service.TempFriendService - Request me already send checking: userId=1, friendId=2
2024-10-23 19:25:35 ERROR r.a.u.service.TempFriendService - Request me already send: userId=1, friendId=2
2024-10-23 19:25:35 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 19:25:35 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.request_me_already_send
2024-10-23 19:25:35 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Заявка в друзья от этого пользователя вам уже отправлена', instance='null', properties='null']
2024-10-23 19:25:35 INFO  r.a.u.controller.FriendController - Executing confirmRequestFriend for userId: 1, friendId: 2
2024-10-23 19:25:35 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-23 19:25:35 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-23 19:25:35 INFO  r.a.u.service.FriendService - Saving friends for userId=1, friendId=2
2024-10-23 19:25:35 INFO  r.a.u.service.FriendService - Deleting request friendship for userId=1, friendId=2
2024-10-23 19:25:35 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: message.ok.confirm_request
2024-10-23 19:25:35 WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [public void ru.andreyszdlv.userservice.controller.FriendControllerIT.confirmRequestFriend_Returns201_WhenRequestExist() throws java.lang.Exception] and test instance [ru.andreyszdlv.userservice.controller.FriendControllerIT@2bbc6496]
org.mockito.exceptions.misusing.InvalidUseOfMatchersException: 
Misplaced or misused argument matcher detected here:

-> at ru.andreyszdlv.userservice.controller.FriendControllerIT.confirmRequestFriend_Returns201_WhenRequestExist(FriendControllerIT.java:185)

You cannot use argument matchers outside of verification or stubbing.
Examples of correct usage of argument matchers:
    when(mock.get(anyInt())).thenReturn(null);
    doThrow(new RuntimeException()).when(mock).someVoidMethod(any());
    verify(mock).someMethod(contains("foo"))

This message may appear after an NullPointerException if the last matcher is returning an object 
like any() but the stubbed method signature expect a primitive argument, in this case,
use primitive alternatives.
    when(mock.get(any())); // bad use, will raise NPE
    when(mock.get(anyInt())); // correct usage use

Also, this error might show up because you use argument matchers with methods that cannot be mocked.
Following methods *cannot* be stubbed/verified: final/private/equals()/hashCode().
Mocking methods declared on non-public parent classes is not supported.

	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:84)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:71)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:65)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:440)
	at org.springframework.test.context.junit.jupiter.SpringExtension.afterEach(SpringExtension.java:206)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAfterEachCallbacks$12(TestMethodTestDescriptor.java:260)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$13(TestMethodTestDescriptor.java:276)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$14(TestMethodTestDescriptor.java:276)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAllAfterMethodsOrCallbacks(TestMethodTestDescriptor.java:275)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAfterEachCallbacks(TestMethodTestDescriptor.java:259)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:144)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
2024-10-23 19:25:35 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 19:25:35 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 19:25:35 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 19:25:35 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 19:25:35 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 19:25:35 INFO  r.a.u.service.TempFriendService - Request me already send checking: userId=1, friendId=2
2024-10-23 19:25:35 INFO  r.a.u.service.TempFriendService - Saving request: userId=1, friendId=2
2024-10-23 19:25:35 INFO  r.a.u.controller.FriendController - Successfully created request for userId: 1, friendId: 2
2024-10-23 19:25:35 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: message.ok.create_request_friend
2024-10-23 19:25:35 WARN  o.s.test.context.TestContextManager - Caught exception while invoking 'afterTestMethod' callback on TestExecutionListener [org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener] for test method [void ru.andreyszdlv.userservice.controller.FriendControllerIT.createRequestFriend_Returned201_WhenRequestCreate() throws java.lang.Exception] and test instance [ru.andreyszdlv.userservice.controller.FriendControllerIT@10a199e0]
org.mockito.exceptions.misusing.InvalidUseOfMatchersException: 
Misplaced or misused argument matcher detected here:

-> at ru.andreyszdlv.userservice.controller.FriendControllerIT.createRequestFriend_Returned201_WhenRequestCreate(FriendControllerIT.java:116)

You cannot use argument matchers outside of verification or stubbing.
Examples of correct usage of argument matchers:
    when(mock.get(anyInt())).thenReturn(null);
    doThrow(new RuntimeException()).when(mock).someVoidMethod(any());
    verify(mock).someMethod(contains("foo"))

This message may appear after an NullPointerException if the last matcher is returning an object 
like any() but the stubbed method signature expect a primitive argument, in this case,
use primitive alternatives.
    when(mock.get(any())); // bad use, will raise NPE
    when(mock.get(anyInt())); // correct usage use

Also, this error might show up because you use argument matchers with methods that cannot be mocked.
Following methods *cannot* be stubbed/verified: final/private/equals()/hashCode().
Mocking methods declared on non-public parent classes is not supported.

	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:84)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.resetMocks(ResetMocksTestExecutionListener.java:71)
	at org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener.afterTestMethod(ResetMocksTestExecutionListener.java:65)
	at org.springframework.test.context.TestContextManager.afterTestMethod(TestContextManager.java:440)
	at org.springframework.test.context.junit.jupiter.SpringExtension.afterEach(SpringExtension.java:206)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAfterEachCallbacks$12(TestMethodTestDescriptor.java:260)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$13(TestMethodTestDescriptor.java:276)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeAllAfterMethodsOrCallbacks$14(TestMethodTestDescriptor.java:276)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAllAfterMethodsOrCallbacks(TestMethodTestDescriptor.java:275)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeAfterEachCallbacks(TestMethodTestDescriptor.java:259)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:144)
	at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)
	at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)
	at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)
	at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)
	at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)
	at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)
	at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)
	at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)
	at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)
	at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)
	at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)
	at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)
2024-10-23 19:25:35 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 19:25:35 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 19:25:35 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 19:25:35 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 19:25:35 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 19:25:35 ERROR r.a.u.service.TempFriendService - Request already send: userId=1, friendId=2
2024-10-23 19:25:35 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 19:25:35 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.request_already_send
2024-10-23 19:25:35 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Заявка в друзья уже отправлена', instance='null', properties='null']
2024-10-23 19:25:35 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 19:25:35 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 19:25:35 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 19:25:35 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 19:25:35 ERROR r.a.u.service.TempFriendService - Users with userId=1 and friendId=2 are already friends
2024-10-23 19:25:35 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 19:25:35 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.users_already_friends
2024-10-23 19:25:35 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Пользователи уже друзья', instance='null', properties='null']
2024-10-23 19:25:35 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 19:25:35 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 19:25:35 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 19:25:35 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 19:25:35 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 19:25:35 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 19:25:35 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-c19b9d1c-7095-42db-bebe-9067e5ca000d sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 19:25:35 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 19:25:35 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 19:25:35 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 19:25:35 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 19:25:35 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 19:25:37 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 19:25:37 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 19:25:37 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 19:25:37 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 19:25:37 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 19:25:37 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 19:25:37 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 19:25:37 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 19:33:02 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 19:33:03 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 19:33:04 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 19:33:04 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 10548 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 19:33:04 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 19:33:04 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 19:33:04 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 19:33:06 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 19:33:06 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 222 ms. Found 3 JPA repository interfaces.
2024-10-23 19:33:07 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 19:33:08 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 19:33:08 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 19:33:08 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 19:33:08 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 19:33:08 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4cd9ee2c
2024-10-23 19:33:08 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 19:33:09 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 19:33:09 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 19:33:09 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 19:33:10 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 19:33:10 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 0c6294cc-210e-443c-9cd8-c316f32e196f

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 19:33:11 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 19:33:11 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@42000298, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4df9df06, org.springframework.security.web.context.SecurityContextHolderFilter@1a524c6b, org.springframework.security.web.header.HeaderWriterFilter@2048255a, org.springframework.web.filter.CorsFilter@6e87556f, org.springframework.security.web.authentication.logout.LogoutFilter@305230ea, ru.andreyszdlv.userservice.filter.RoleUserFilter@2d541e01, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2f7e2481, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6b71fded, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@7a273fd7, org.springframework.security.web.session.SessionManagementFilter@7a68818c, org.springframework.security.web.access.ExceptionTranslationFilter@280d20fb, org.springframework.security.web.access.intercept.AuthorizationFilter@45295bed]
2024-10-23 19:33:12 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 19:33:12 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 19:33:12 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 5 ms
2024-10-23 19:33:12 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 19:33:12 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 19:33:12 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 19:33:13 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 19:33:13 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 19:33:13 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729701193016
2024-10-23 19:33:13 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 19:33:13 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 19:33:13 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 19:33:13 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 19:33:13 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 19:33:13 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 19:33:13 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 19:33:13 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729701193795
2024-10-23 19:33:13 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 19:33:13 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 19:33:13 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 19:33:13 INFO  r.a.u.controller.FriendControllerIT - Started FriendControllerIT in 10.533 seconds (process running for 12.134)
2024-10-23 19:33:13 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 19:33:13 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 19:33:13 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-1cbcc800-25d9-4d6c-b509-b6e0255937ea
2024-10-23 19:33:13 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 19:33:13 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 19:33:14 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 19:33:14 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 19:33:14 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 19:33:14 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 19:33:14 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 19:33:14 INFO  r.a.u.service.TempFriendService - Request me already send checking: userId=1, friendId=2
2024-10-23 19:33:14 ERROR r.a.u.service.TempFriendService - Request me already send: userId=1, friendId=2
2024-10-23 19:33:14 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 19:33:14 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.request_me_already_send
2024-10-23 19:33:14 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Заявка в друзья от этого пользователя вам уже отправлена', instance='null', properties='null']
2024-10-23 19:33:14 INFO  r.a.u.controller.FriendController - Executing confirmRequestFriend for userId: 1, friendId: 2
2024-10-23 19:33:14 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-23 19:33:14 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-23 19:33:14 INFO  r.a.u.service.FriendService - Saving friends for userId=1, friendId=2
2024-10-23 19:33:14 INFO  r.a.u.service.FriendService - Deleting request friendship for userId=1, friendId=2
2024-10-23 19:33:14 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: message.ok.confirm_request
2024-10-23 19:33:14 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 19:33:14 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 19:33:14 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 19:33:14 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 19:33:14 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 19:33:14 INFO  r.a.u.service.TempFriendService - Request me already send checking: userId=1, friendId=2
2024-10-23 19:33:14 INFO  r.a.u.service.TempFriendService - Saving request: userId=1, friendId=2
2024-10-23 19:33:14 INFO  r.a.u.controller.FriendController - Successfully created request for userId: 1, friendId: 2
2024-10-23 19:33:14 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: message.ok.create_request_friend
2024-10-23 19:33:14 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 19:33:14 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 19:33:14 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 19:33:14 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 19:33:14 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 19:33:14 ERROR r.a.u.service.TempFriendService - Request already send: userId=1, friendId=2
2024-10-23 19:33:14 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 19:33:14 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.request_already_send
2024-10-23 19:33:14 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Заявка в друзья уже отправлена', instance='null', properties='null']
2024-10-23 19:33:14 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 19:33:14 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 19:33:14 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 19:33:14 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 19:33:14 ERROR r.a.u.service.TempFriendService - Users with userId=1 and friendId=2 are already friends
2024-10-23 19:33:14 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 19:33:14 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.users_already_friends
2024-10-23 19:33:14 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Пользователи уже друзья', instance='null', properties='null']
2024-10-23 19:33:14 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 19:33:14 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 19:33:14 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 19:33:14 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 19:33:14 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 19:33:14 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 19:33:14 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-1cbcc800-25d9-4d6c-b509-b6e0255937ea sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 19:33:14 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 19:33:14 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 19:33:14 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 19:33:14 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 19:33:14 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 19:33:16 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 19:33:16 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 19:33:16 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 19:33:16 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 19:33:16 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 19:33:16 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 19:33:16 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 19:33:16 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 22:21:45 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 22:21:45 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 22:21:47 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 22:21:47 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 23336 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 22:21:47 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 22:21:47 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 22:21:47 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 22:21:49 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 22:21:50 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 238 ms. Found 3 JPA repository interfaces.
2024-10-23 22:21:50 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 22:21:51 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 22:21:52 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 22:21:52 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 22:21:52 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 22:21:52 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7c751692
2024-10-23 22:21:52 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 22:21:52 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 22:21:53 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 22:21:53 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 22:21:54 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 22:21:54 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: c08bb887-1f66-47e6-9e40-6e733999ef2d

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 22:21:54 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 22:21:54 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@5545c42, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2420e962, org.springframework.security.web.context.SecurityContextHolderFilter@14738629, org.springframework.security.web.header.HeaderWriterFilter@6bca3b27, org.springframework.web.filter.CorsFilter@1fc51af7, org.springframework.security.web.authentication.logout.LogoutFilter@17abef0f, ru.andreyszdlv.userservice.filter.RoleUserFilter@32a29361, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@150963fe, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7e00a43e, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@66df2165, org.springframework.security.web.session.SessionManagementFilter@2787abe4, org.springframework.security.web.access.ExceptionTranslationFilter@25a2a71d, org.springframework.security.web.access.intercept.AuthorizationFilter@305230ea]
2024-10-23 22:21:55 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 22:21:55 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 22:21:55 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 3 ms
2024-10-23 22:21:55 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 22:21:55 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 22:21:55 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 22:21:56 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 22:21:56 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 22:21:56 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729711316130
2024-10-23 22:21:56 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 22:21:56 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 22:21:56 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 22:21:56 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 22:21:56 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 22:21:56 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 22:21:56 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 22:21:56 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729711316934
2024-10-23 22:21:56 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 22:21:56 INFO  r.a.u.controller.FriendControllerIT - Started FriendControllerIT in 11.032 seconds (process running for 12.804)
2024-10-23 22:21:56 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 22:21:56 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 22:21:56 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 22:21:56 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 22:21:57 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-c36fbdbd-530c-4ea0-8c29-3d0623ea5daf
2024-10-23 22:21:57 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 22:21:57 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Request me already send checking: userId=1, friendId=2
2024-10-23 22:21:57 ERROR r.a.u.service.TempFriendService - Request me already send: userId=1, friendId=2
2024-10-23 22:21:57 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 22:21:57 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.request_me_already_send
2024-10-23 22:21:57 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Заявка в друзья от этого пользователя вам уже отправлена', instance='null', properties='null']
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Executing confirmRequestFriend for userId: 1, friendId: 2
2024-10-23 22:21:57 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-23 22:21:57 ERROR r.a.u.service.FriendService - Request no send: userId=1, friendId=2
2024-10-23 22:21:57 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleNotFoundException
2024-10-23 22:21:57 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.404.request_not_found
2024-10-23 22:21:57 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - NotFoundException: ProblemDetail[type='about:blank', title='Not Found', status=404, detail='Такая заявка не найдена', instance='null', properties='null']
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Executing deleteMyRequest for userId: 1, friendId: 2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Executing deleteMyRequest for userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Checking exist request: userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Deleting request: userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Executing deleteRequest for userId: 1, friendId: 2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Executing deleteRequest for userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Checking exist request: userId=1, friendId=2
2024-10-23 22:21:57 ERROR r.a.u.service.TempFriendService - This request not found: userId=1, friendId=2
2024-10-23 22:21:57 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleNotFoundException
2024-10-23 22:21:57 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.404.request_not_found
2024-10-23 22:21:57 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - NotFoundException: ProblemDetail[type='about:blank', title='Not Found', status=404, detail='Такая заявка не найдена', instance='null', properties='null']
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Executing confirmRequestFriend for userId: 1, friendId: 2
2024-10-23 22:21:57 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.FriendService - Saving friends for userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.FriendService - Deleting request friendship for userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: message.ok.confirm_request
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Request me already send checking: userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Saving request: userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Successfully created request for userId: 1, friendId: 2
2024-10-23 22:21:57 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: message.ok.create_request_friend
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 22:21:57 ERROR r.a.u.service.TempFriendService - Request already send: userId=1, friendId=2
2024-10-23 22:21:57 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 22:21:57 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.request_already_send
2024-10-23 22:21:57 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Заявка в друзья уже отправлена', instance='null', properties='null']
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Executing deleteMyRequest for userId: 1, friendId: 2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Executing deleteMyRequest for userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Checking exist request: userId=1, friendId=2
2024-10-23 22:21:57 ERROR r.a.u.service.TempFriendService - This request not found: userId=1, friendId=2
2024-10-23 22:21:57 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleNotFoundException
2024-10-23 22:21:57 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.404.request_not_found
2024-10-23 22:21:57 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - NotFoundException: ProblemDetail[type='about:blank', title='Not Found', status=404, detail='Такая заявка не найдена', instance='null', properties='null']
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 22:21:57 ERROR r.a.u.service.TempFriendService - Users with userId=1 and friendId=2 are already friends
2024-10-23 22:21:57 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 22:21:57 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.users_already_friends
2024-10-23 22:21:57 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Пользователи уже друзья', instance='null', properties='null']
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Executing deleteFriend for userId: 1, friendId: 2
2024-10-23 22:21:57 INFO  r.a.u.service.FriendService - Executing deleteFriend for userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.FriendService - Friendship checking: userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.FriendService - Deleting friend: userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.FriendService - Deleting friend: userId=2, friendId=1
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 22:21:57 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Executing deleteFriend for userId: 1, friendId: 2
2024-10-23 22:21:57 INFO  r.a.u.service.FriendService - Executing deleteFriend for userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.FriendService - Friendship checking: userId=1, friendId=2
2024-10-23 22:21:57 ERROR r.a.u.service.FriendService - Users no friends: userId=1, friendId=2
2024-10-23 22:21:57 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 22:21:57 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.users_no_friend
2024-10-23 22:21:57 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Вы не друзья', instance='null', properties='null']
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 22:21:57 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 22:21:57 INFO  r.a.u.controller.FriendController - Executing deleteRequest for userId: 1, friendId: 2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Executing deleteRequest for userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Checking exist request: userId=1, friendId=2
2024-10-23 22:21:57 INFO  r.a.u.service.TempFriendService - Deleting request: userId=1, friendId=2
2024-10-23 22:21:57 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 22:21:57 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 22:21:57 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-c36fbdbd-530c-4ea0-8c29-3d0623ea5daf sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 22:21:57 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 22:21:57 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 22:21:57 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 22:21:57 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 22:21:57 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 22:22:00 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 22:22:00 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 22:22:00 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 22:22:00 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 22:22:00 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 22:22:00 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 22:22:00 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 22:22:00 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 22:23:04 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.FriendControllerIT]: FriendControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 22:23:04 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.FriendControllerIT
2024-10-23 22:23:05 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 22:23:05 INFO  r.a.u.controller.FriendControllerIT - Starting FriendControllerIT using Java 17.0.11 with PID 24544 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 22:23:05 INFO  r.a.u.controller.FriendControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 22:23:05 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 22:23:05 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 22:23:07 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 22:23:07 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 185 ms. Found 3 JPA repository interfaces.
2024-10-23 22:23:08 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 22:23:09 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 22:23:09 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 22:23:09 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 22:23:09 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 22:23:09 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@43edd2ea
2024-10-23 22:23:09 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 22:23:09 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 22:23:10 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 22:23:10 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 22:23:11 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 22:23:11 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 36e48832-227b-40d1-8aad-7c744c19e883

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 22:23:11 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 22:23:11 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@6aefb242, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1455d0f5, org.springframework.security.web.context.SecurityContextHolderFilter@5fd0235c, org.springframework.security.web.header.HeaderWriterFilter@3e3b41cb, org.springframework.web.filter.CorsFilter@5c4e86e7, org.springframework.security.web.authentication.logout.LogoutFilter@1bce19db, ru.andreyszdlv.userservice.filter.RoleUserFilter@28f7cca4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@56929ce, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6bca3b27, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@48a2fb11, org.springframework.security.web.session.SessionManagementFilter@28833fff, org.springframework.security.web.access.ExceptionTranslationFilter@6984f7d1, org.springframework.security.web.access.intercept.AuthorizationFilter@2f5a23c1]
2024-10-23 22:23:12 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 22:23:12 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 22:23:12 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 1 ms
2024-10-23 22:23:12 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 22:23:12 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 22:23:12 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 22:23:12 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 22:23:12 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 22:23:12 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729711392938
2024-10-23 22:23:13 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 22:23:13 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 22:23:13 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 22:23:13 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 22:23:13 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 22:23:13 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 22:23:13 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 22:23:13 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729711393517
2024-10-23 22:23:13 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 22:23:13 INFO  r.a.u.controller.FriendControllerIT - Started FriendControllerIT in 8.735 seconds (process running for 10.091)
2024-10-23 22:23:13 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 22:23:13 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 22:23:13 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 22:23:13 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 22:23:13 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-3c76fdc3-41e3-4dbd-87d0-76ca150fb520
2024-10-23 22:23:13 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 22:23:13 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 22:23:13 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 22:23:13 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 22:23:13 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 22:23:13 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 22:23:13 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 22:23:13 INFO  r.a.u.service.TempFriendService - Request me already send checking: userId=1, friendId=2
2024-10-23 22:23:13 ERROR r.a.u.service.TempFriendService - Request me already send: userId=1, friendId=2
2024-10-23 22:23:13 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 22:23:13 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.request_me_already_send
2024-10-23 22:23:13 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Заявка в друзья от этого пользователя вам уже отправлена', instance='null', properties='null']
2024-10-23 22:23:13 INFO  r.a.u.controller.FriendController - Executing confirmRequestFriend for userId: 1, friendId: 2
2024-10-23 22:23:13 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-23 22:23:13 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-23 22:23:13 ERROR r.a.u.service.FriendService - Request no send: userId=1, friendId=2
2024-10-23 22:23:13 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleNotFoundException
2024-10-23 22:23:13 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.404.request_not_found
2024-10-23 22:23:13 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - NotFoundException: ProblemDetail[type='about:blank', title='Not Found', status=404, detail='Такая заявка не найдена', instance='null', properties='null']
2024-10-23 22:23:13 INFO  r.a.u.controller.FriendController - Executing deleteMyRequest for userId: 1, friendId: 2
2024-10-23 22:23:13 INFO  r.a.u.service.TempFriendService - Executing deleteMyRequest for userId=1, friendId=2
2024-10-23 22:23:13 INFO  r.a.u.service.TempFriendService - Checking exist request: userId=1, friendId=2
2024-10-23 22:23:13 INFO  r.a.u.service.TempFriendService - Deleting request: userId=1, friendId=2
2024-10-23 22:23:13 INFO  r.a.u.controller.FriendController - Executing deleteRequest for userId: 1, friendId: 2
2024-10-23 22:23:13 INFO  r.a.u.service.TempFriendService - Executing deleteRequest for userId=1, friendId=2
2024-10-23 22:23:13 INFO  r.a.u.service.TempFriendService - Checking exist request: userId=1, friendId=2
2024-10-23 22:23:13 ERROR r.a.u.service.TempFriendService - This request not found: userId=1, friendId=2
2024-10-23 22:23:13 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleNotFoundException
2024-10-23 22:23:13 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.404.request_not_found
2024-10-23 22:23:13 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - NotFoundException: ProblemDetail[type='about:blank', title='Not Found', status=404, detail='Такая заявка не найдена', instance='null', properties='null']
2024-10-23 22:23:13 INFO  r.a.u.controller.FriendController - Executing confirmRequestFriend for userId: 1, friendId: 2
2024-10-23 22:23:13 INFO  r.a.u.service.FriendService - Executing confirmRequestFriend for userId=1, friendId=2
2024-10-23 22:23:13 INFO  r.a.u.service.FriendService - Request send checking: userId=1, friendId=2
2024-10-23 22:23:13 INFO  r.a.u.service.FriendService - Saving friends for userId=1, friendId=2
2024-10-23 22:23:13 INFO  r.a.u.service.FriendService - Deleting request friendship for userId=1, friendId=2
2024-10-23 22:23:13 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: message.ok.confirm_request
2024-10-23 22:23:14 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 22:23:14 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 22:23:14 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 22:23:14 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 22:23:14 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 22:23:14 INFO  r.a.u.service.TempFriendService - Request me already send checking: userId=1, friendId=2
2024-10-23 22:23:14 INFO  r.a.u.service.TempFriendService - Saving request: userId=1, friendId=2
2024-10-23 22:23:14 INFO  r.a.u.controller.FriendController - Successfully created request for userId: 1, friendId: 2
2024-10-23 22:23:14 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: message.ok.create_request_friend
2024-10-23 22:23:14 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 22:23:14 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 22:23:14 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 22:23:14 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 22:23:14 INFO  r.a.u.service.TempFriendService - Request already send checking: userId=1, friendId=2
2024-10-23 22:23:14 ERROR r.a.u.service.TempFriendService - Request already send: userId=1, friendId=2
2024-10-23 22:23:14 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 22:23:14 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.request_already_send
2024-10-23 22:23:14 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Заявка в друзья уже отправлена', instance='null', properties='null']
2024-10-23 22:23:14 INFO  r.a.u.controller.FriendController - Executing deleteMyRequest for userId: 1, friendId: 2
2024-10-23 22:23:14 INFO  r.a.u.service.TempFriendService - Executing deleteMyRequest for userId=1, friendId=2
2024-10-23 22:23:14 INFO  r.a.u.service.TempFriendService - Checking exist request: userId=1, friendId=2
2024-10-23 22:23:14 ERROR r.a.u.service.TempFriendService - This request not found: userId=1, friendId=2
2024-10-23 22:23:14 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleNotFoundException
2024-10-23 22:23:14 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.404.request_not_found
2024-10-23 22:23:14 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - NotFoundException: ProblemDetail[type='about:blank', title='Not Found', status=404, detail='Такая заявка не найдена', instance='null', properties='null']
2024-10-23 22:23:14 INFO  r.a.u.controller.FriendController - Executing createRequestFriend for userId: 1, friendId: 2
2024-10-23 22:23:14 INFO  r.a.u.controller.FriendController - Creating request friend for userId: 1, friendId: 2
2024-10-23 22:23:14 INFO  r.a.u.service.TempFriendService - Executing createRequestFriend for userId=1, friendId=2
2024-10-23 22:23:14 INFO  r.a.u.service.TempFriendService - Friendship checking: userId=1, friendId=2
2024-10-23 22:23:14 ERROR r.a.u.service.TempFriendService - Users with userId=1 and friendId=2 are already friends
2024-10-23 22:23:14 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 22:23:14 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.users_already_friends
2024-10-23 22:23:14 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Пользователи уже друзья', instance='null', properties='null']
2024-10-23 22:23:14 INFO  r.a.u.controller.FriendController - Executing deleteFriend for userId: 1, friendId: 2
2024-10-23 22:23:14 INFO  r.a.u.service.FriendService - Executing deleteFriend for userId=1, friendId=2
2024-10-23 22:23:14 INFO  r.a.u.service.FriendService - Friendship checking: userId=1, friendId=2
2024-10-23 22:23:14 INFO  r.a.u.service.FriendService - Deleting friend: userId=1, friendId=2
2024-10-23 22:23:14 INFO  r.a.u.service.FriendService - Deleting friend: userId=2, friendId=1
2024-10-23 22:23:14 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 22:23:14 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 22:23:14 INFO  r.a.u.controller.FriendController - Executing deleteFriend for userId: 1, friendId: 2
2024-10-23 22:23:14 INFO  r.a.u.service.FriendService - Executing deleteFriend for userId=1, friendId=2
2024-10-23 22:23:14 INFO  r.a.u.service.FriendService - Friendship checking: userId=1, friendId=2
2024-10-23 22:23:14 ERROR r.a.u.service.FriendService - Users no friends: userId=1, friendId=2
2024-10-23 22:23:14 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleConflictException
2024-10-23 22:23:14 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.409.users_no_friend
2024-10-23 22:23:14 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - ConflictException: ProblemDetail[type='about:blank', title='Conflict', status=409, detail='Вы не друзья', instance='null', properties='null']
2024-10-23 22:23:14 INFO  r.a.u.controller.FriendController - Executing getFriends for userId: 1
2024-10-23 22:23:14 INFO  r.a.u.service.FriendService - Executing getFriendsById for userId=1
2024-10-23 22:23:14 INFO  r.a.u.controller.FriendController - Executing deleteRequest for userId: 1, friendId: 2
2024-10-23 22:23:14 INFO  r.a.u.service.TempFriendService - Executing deleteRequest for userId=1, friendId=2
2024-10-23 22:23:14 INFO  r.a.u.service.TempFriendService - Checking exist request: userId=1, friendId=2
2024-10-23 22:23:14 INFO  r.a.u.service.TempFriendService - Deleting request: userId=1, friendId=2
2024-10-23 22:23:14 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 22:23:14 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 22:23:14 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-3c76fdc3-41e3-4dbd-87d0-76ca150fb520 sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 22:23:14 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 22:23:14 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 22:23:14 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 22:23:14 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 22:23:14 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 22:23:16 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 22:23:16 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 22:23:16 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 22:23:16 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 22:23:16 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 22:23:16 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 22:23:16 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 22:23:16 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 22:47:44 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.UserControllerIT]: UserControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 22:47:44 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.UserControllerIT
2024-10-23 22:47:45 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 22:47:46 INFO  r.a.u.controller.UserControllerIT - Starting UserControllerIT using Java 17.0.11 with PID 2072 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 22:47:46 INFO  r.a.u.controller.UserControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 22:47:46 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 22:47:46 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 22:47:47 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 22:47:47 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 183 ms. Found 3 JPA repository interfaces.
2024-10-23 22:47:48 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 22:47:49 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 22:47:49 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 22:47:49 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 22:47:49 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 22:47:49 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4b1b2255
2024-10-23 22:47:49 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 22:47:50 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 22:47:50 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 22:47:50 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 22:47:51 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 22:47:51 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: bd9227ce-b1e1-4b4a-8f92-9fc41b81f4ae

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 22:47:52 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 22:47:52 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@63c6579, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5c7a699b, org.springframework.security.web.context.SecurityContextHolderFilter@7b2a6ed3, org.springframework.security.web.header.HeaderWriterFilter@5bf86398, org.springframework.web.filter.CorsFilter@38cd7531, org.springframework.security.web.authentication.logout.LogoutFilter@1e32a3ed, ru.andreyszdlv.userservice.filter.RoleUserFilter@769c80d1, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2c6b36d7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@363bf9d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1dd36967, org.springframework.security.web.session.SessionManagementFilter@28bf7bea, org.springframework.security.web.access.ExceptionTranslationFilter@1ccfa4b8, org.springframework.security.web.access.intercept.AuthorizationFilter@37ddb835]
2024-10-23 22:47:53 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 22:47:53 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 22:47:53 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2024-10-23 22:47:53 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 22:47:53 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 22:47:53 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 22:47:53 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 22:47:53 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 22:47:53 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729712873570
2024-10-23 22:47:54 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 22:47:54 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 22:47:54 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 22:47:54 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 22:47:54 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 22:47:54 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 22:47:54 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 22:47:54 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729712874164
2024-10-23 22:47:54 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 22:47:54 INFO  r.a.u.controller.UserControllerIT - Started UserControllerIT in 9.171 seconds (process running for 10.757)
2024-10-23 22:47:54 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 22:47:54 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 22:47:54 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 22:47:54 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 22:47:54 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-123024e5-3707-4777-96a7-6db230c1f8af
2024-10-23 22:47:54 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 22:47:54 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 22:47:54 WARN  o.s.w.s.m.s.DefaultHandlerExceptionResolver - Resolved [org.springframework.web.HttpMediaTypeNotSupportedException: Content-Type 'application/octet-stream' is not supported]
2024-10-23 22:47:54 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 22:47:54 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 22:47:54 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-123024e5-3707-4777-96a7-6db230c1f8af sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 22:47:54 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 22:47:54 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 22:47:54 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 22:47:54 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 22:47:54 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 22:47:57 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 22:47:57 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 22:47:57 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 22:47:57 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 22:47:57 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 22:47:57 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 22:47:57 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 22:47:57 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 22:50:38 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.UserControllerIT]: UserControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 22:50:38 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.UserControllerIT
2024-10-23 22:50:39 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 22:50:39 INFO  r.a.u.controller.UserControllerIT - Starting UserControllerIT using Java 17.0.11 with PID 952 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 22:50:39 INFO  r.a.u.controller.UserControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 22:50:39 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 22:50:39 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 22:50:41 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 22:50:41 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 186 ms. Found 3 JPA repository interfaces.
2024-10-23 22:50:42 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 22:50:43 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 22:50:43 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 22:50:43 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 22:50:43 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 22:50:43 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1e4a4ed5
2024-10-23 22:50:43 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 22:50:43 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 22:50:44 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 22:50:44 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 22:50:45 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 22:50:45 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 49d50534-150d-4383-9c1d-b889a1439be1

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 22:50:46 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 22:50:46 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@42b4cce1, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@67f8586f, org.springframework.security.web.context.SecurityContextHolderFilter@44881fcc, org.springframework.security.web.header.HeaderWriterFilter@1ccfa4b8, org.springframework.web.filter.CorsFilter@63c6579, org.springframework.security.web.authentication.logout.LogoutFilter@6a73f164, ru.andreyszdlv.userservice.filter.RoleUserFilter@7cddc50f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7b2a6ed3, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@17e03804, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5c7a699b, org.springframework.security.web.session.SessionManagementFilter@3f634608, org.springframework.security.web.access.ExceptionTranslationFilter@6c1f1c03, org.springframework.security.web.access.intercept.AuthorizationFilter@25000d3d]
2024-10-23 22:50:46 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 22:50:46 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 22:50:46 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2024-10-23 22:50:46 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 22:50:47 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 22:50:47 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 22:50:47 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 22:50:47 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 22:50:47 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729713047330
2024-10-23 22:50:47 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 22:50:47 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 22:50:47 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 22:50:47 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 22:50:47 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 22:50:47 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 22:50:47 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 22:50:47 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729713047943
2024-10-23 22:50:47 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 22:50:47 INFO  r.a.u.controller.UserControllerIT - Started UserControllerIT in 9.078 seconds (process running for 10.613)
2024-10-23 22:50:47 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 22:50:47 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 22:50:47 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 22:50:47 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 22:50:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-f09b6e7b-442e-4831-907d-f61ab8fd98ea
2024-10-23 22:50:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 22:50:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 22:50:48 INFO  r.a.u.controller.UserController - Executing updateEmailUser for userId = 1, newEmail = newemail@example.com
2024-10-23 22:50:48 INFO  r.a.u.controller.UserController - Validation successful, userId = 1, newEmail = newemail@example.com
2024-10-23 22:50:48 INFO  r.a.userservice.service.UserService - Executing updateEmailUser: userId = 1, newEmail = newemail@example.com
2024-10-23 22:50:48 INFO  r.a.userservice.service.UserService - Getting user by id: 1
2024-10-23 22:50:48 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleNotFoundException
2024-10-23 22:50:48 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.404.user_not_found
2024-10-23 22:50:48 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - NotFoundException: ProblemDetail[type='about:blank', title='Not Found', status=404, detail='Пользователь не найден', instance='null', properties='null']
2024-10-23 22:50:48 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 22:50:48 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 22:50:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-f09b6e7b-442e-4831-907d-f61ab8fd98ea sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 22:50:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 22:50:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 22:50:48 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 22:50:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 22:50:48 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 22:50:51 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 22:50:51 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 22:50:51 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 22:50:51 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 22:50:51 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 22:50:51 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 22:50:51 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 22:50:51 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 22:54:38 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.UserControllerIT]: UserControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 22:54:38 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.UserControllerIT
2024-10-23 22:54:39 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 22:54:39 INFO  r.a.u.controller.UserControllerIT - Starting UserControllerIT using Java 17.0.11 with PID 8260 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 22:54:39 INFO  r.a.u.controller.UserControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 22:54:39 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 22:54:39 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 22:54:41 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 22:54:41 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 164 ms. Found 3 JPA repository interfaces.
2024-10-23 22:54:41 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 22:54:42 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 22:54:42 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 22:54:43 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 22:54:43 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 22:54:43 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@656c0eae
2024-10-23 22:54:43 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 22:54:43 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 22:54:44 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 22:54:44 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 22:54:45 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 22:54:45 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 172dea68-c45c-4f4c-9957-6e3e38673b13

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 22:54:45 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 22:54:45 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@363bf9d, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@184218af, org.springframework.security.web.context.SecurityContextHolderFilter@673ce246, org.springframework.security.web.header.HeaderWriterFilter@253fb3fa, org.springframework.web.filter.CorsFilter@e7423bb, org.springframework.security.web.authentication.logout.LogoutFilter@1ccfa4b8, ru.andreyszdlv.userservice.filter.RoleUserFilter@2f59cb6f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@124b1369, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@50a2034c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@270663e2, org.springframework.security.web.session.SessionManagementFilter@1b42eb0f, org.springframework.security.web.access.ExceptionTranslationFilter@99a89e9, org.springframework.security.web.access.intercept.AuthorizationFilter@3f1485c3]
2024-10-23 22:54:46 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 22:54:46 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 22:54:46 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 0 ms
2024-10-23 22:54:46 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 22:54:46 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 22:54:46 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 22:54:46 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 22:54:46 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 22:54:46 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729713286968
2024-10-23 22:54:47 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 22:54:47 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 22:54:47 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 22:54:47 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 22:54:47 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 22:54:47 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 22:54:47 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 22:54:47 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729713287516
2024-10-23 22:54:47 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 22:54:47 INFO  r.a.u.controller.UserControllerIT - Started UserControllerIT in 8.978 seconds (process running for 10.457)
2024-10-23 22:54:47 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 22:54:47 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 22:54:47 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 22:54:47 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 22:54:47 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-1f1f0b10-b2b1-4bd9-8a1f-63363986553f
2024-10-23 22:54:47 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 22:54:47 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 22:54:47 INFO  r.a.u.controller.UserController - Executing updateEmailUser for userId = 1, newEmail = newemail@example.com
2024-10-23 22:54:47 INFO  r.a.u.controller.UserController - Validation successful, userId = 1, newEmail = newemail@example.com
2024-10-23 22:54:47 INFO  r.a.userservice.service.UserService - Executing updateEmailUser: userId = 1, newEmail = newemail@example.com
2024-10-23 22:54:47 INFO  r.a.userservice.service.UserService - Getting user by id: 1
2024-10-23 22:54:47 INFO  r.a.userservice.service.UserService - Send data oldEmail: oldemail@example.com, newEmail: newemail@example.com in kafka for update email event
2024-10-23 22:54:47 INFO  r.a.u.service.KafkaProducerService - Executing sendEditEmailEvent in kafka with oldEmail
2024-10-23 22:54:47 INFO  o.a.k.c.producer.ProducerConfig - ProducerConfig values: 
	acks = -1
	batch.size = 16384
	bootstrap.servers = [localhost:9092]
	buffer.memory = 33554432
	client.dns.lookup = use_all_dns_ips
	client.id = producer-1
	compression.type = none
	connections.max.idle.ms = 540000
	delivery.timeout.ms = 120000
	enable.idempotence = true
	interceptor.classes = []
	key.serializer = class org.apache.kafka.common.serialization.StringSerializer
	linger.ms = 0
	max.block.ms = 60000
	max.in.flight.requests.per.connection = 5
	max.request.size = 1048576
	metadata.max.age.ms = 300000
	metadata.max.idle.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partitioner.adaptive.partitioning.enable = true
	partitioner.availability.timeout.ms = 0
	partitioner.class = null
	partitioner.ignore.keys = false
	receive.buffer.bytes = 32768
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	transaction.timeout.ms = 60000
	transactional.id = null
	value.serializer = class org.springframework.kafka.support.serializer.JsonSerializer

2024-10-23 22:54:47 INFO  o.a.k.clients.producer.KafkaProducer - [Producer clientId=producer-1] Instantiated an idempotent producer.
2024-10-23 22:54:47 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 22:54:47 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 22:54:47 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729713287870
2024-10-23 22:54:47 INFO  org.apache.kafka.clients.Metadata - [Producer clientId=producer-1] Resetting the last seen epoch of partition user-event-edit-email-0 to 0 since the associated topicId changed from null to 72bs0iaYTt2_v_6iDlcUEg
2024-10-23 22:54:47 INFO  org.apache.kafka.clients.Metadata - [Producer clientId=producer-1] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 22:54:47 INFO  r.a.u.controller.UserController - Email update completed successfully
2024-10-23 22:54:47 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: message.ok.update_email
2024-10-23 22:54:47 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 22:54:47 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 22:54:47 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-1f1f0b10-b2b1-4bd9-8a1f-63363986553f sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 22:54:47 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 22:54:47 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 22:54:47 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 22:54:47 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 22:54:47 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 22:54:48 INFO  o.a.k.c.p.i.TransactionManager - [Producer clientId=producer-1] ProducerId set to 21000 with epoch 0
2024-10-23 22:54:50 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 22:54:50 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 22:54:50 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 22:54:50 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 22:54:50 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 22:54:50 INFO  o.a.k.clients.producer.KafkaProducer - [Producer clientId=producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.
2024-10-23 22:54:50 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 22:54:50 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 22:54:50 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 22:54:50 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.producer for producer-1 unregistered
2024-10-23 22:54:50 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 22:54:50 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 22:54:50 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2024-10-23 22:59:51 INFO  o.s.t.c.s.AnnotationConfigContextLoaderUtils - Could not detect default configuration classes for test class [ru.andreyszdlv.userservice.controller.UserControllerIT]: UserControllerIT does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2024-10-23 22:59:51 INFO  o.s.b.t.c.SpringBootTestContextBootstrapper - Found @SpringBootConfiguration ru.andreyszdlv.userservice.UserServiceApplication for test class ru.andreyszdlv.userservice.controller.UserControllerIT
2024-10-23 22:59:53 INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.0.Final
2024-10-23 22:59:53 INFO  r.a.u.controller.UserControllerIT - Starting UserControllerIT using Java 17.0.11 with PID 2968 (started by Андрей in D:\SocialNetwork\user-service)
2024-10-23 22:59:53 INFO  r.a.u.controller.UserControllerIT - No active profile set, falling back to 1 default profile: "default"
2024-10-23 22:59:53 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Fetching config from server at : http://localhost:8888/
2024-10-23 22:59:53 INFO  o.s.c.c.c.ConfigServerConfigDataLoader - Located environment: name=user-service, profiles=[default], label=null, version=null, state=null
2024-10-23 22:59:54 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2024-10-23 22:59:54 INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 169 ms. Found 3 JPA repository interfaces.
2024-10-23 22:59:55 INFO  o.s.cloud.context.scope.GenericScope - BeanFactory id=0ac75742-4b91-38dd-aab4-bc0f7a4ee858
2024-10-23 22:59:56 INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2024-10-23 22:59:56 INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.1.6.Final
2024-10-23 22:59:56 WARN  org.hibernate.orm.deprecation - HHH90000021: Encountered deprecated setting [javax.persistence.sharedCache.mode], use [jakarta.persistence.sharedCache.mode] instead
2024-10-23 22:59:56 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2024-10-23 22:59:56 INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@52d434c1
2024-10-23 22:59:56 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2024-10-23 22:59:56 INFO  SQL dialect - HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
2024-10-23 22:59:57 INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2024-10-23 22:59:57 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 22:59:58 WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2024-10-23 22:59:58 WARN  o.s.b.a.s.s.UserDetailsServiceAutoConfiguration - 

Using generated security password: 1f3ec4e1-046c-41a4-ad24-9dadb01861bc

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2024-10-23 22:59:59 INFO  o.s.b.a.e.web.EndpointLinksResolver - Exposing 1 endpoint(s) beneath base path '/actuator'
2024-10-23 22:59:59 INFO  o.s.s.web.DefaultSecurityFilterChain - Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@fbb585e, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1e32a3ed, org.springframework.security.web.context.SecurityContextHolderFilter@19f007c4, org.springframework.security.web.header.HeaderWriterFilter@7508912e, org.springframework.web.filter.CorsFilter@5e7aa27e, org.springframework.security.web.authentication.logout.LogoutFilter@31084f37, ru.andreyszdlv.userservice.filter.RoleUserFilter@5bd191c2, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3d3709d0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@69e3e1d9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2b778004, org.springframework.security.web.session.SessionManagementFilter@5d46f4a3, org.springframework.security.web.access.ExceptionTranslationFilter@56a0dd11, org.springframework.security.web.access.intercept.AuthorizationFilter@7b0d42b6]
2024-10-23 23:00:00 INFO  o.s.b.t.m.w.SpringBootMockServletContext - Initializing Spring TestDispatcherServlet ''
2024-10-23 23:00:00 INFO  o.s.t.w.s.TestDispatcherServlet - Initializing Servlet ''
2024-10-23 23:00:00 INFO  o.s.t.w.s.TestDispatcherServlet - Completed initialization in 7 ms
2024-10-23 23:00:00 INFO  o.s.c.n.e.c.DiscoveryClientOptionalArgsConfiguration - Eureka HTTP Client uses RestTemplate.
2024-10-23 23:00:00 WARN  o.s.c.l.c.LoadBalancerCacheAutoConfiguration$LoadBalancerCaffeineWarnLogger - Spring Cloud LoadBalancer is currently working with the default cache. While this cache implementation is useful for development and tests, it's recommended to use Caffeine cache in production.You can switch to using Caffeine cache, by adding it and org.springframework.cache.caffeine.CaffeineCacheManager to the classpath.
2024-10-23 23:00:00 INFO  o.a.k.c.admin.AdminClientConfig - AdminClientConfig values: 
	bootstrap.servers = [localhost:9092]
	client.dns.lookup = use_all_dns_ips
	client.id = 
	connections.max.idle.ms = 300000
	default.api.timeout.ms = 60000
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS

2024-10-23 23:00:00 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 23:00:00 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 23:00:00 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729713600884
2024-10-23 23:00:01 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.admin.client for adminclient-1 unregistered
2024-10-23 23:00:01 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 23:00:01 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 23:00:01 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 23:00:01 INFO  o.a.k.c.consumer.ConsumerConfig - ConsumerConfig values: 
	allow.auto.create.topics = true
	auto.commit.interval.ms = 5000
	auto.offset.reset = latest
	bootstrap.servers = [localhost:9092]
	check.crcs = true
	client.dns.lookup = use_all_dns_ips
	client.id = consumer-user-group-1
	client.rack = 
	connections.max.idle.ms = 540000
	default.api.timeout.ms = 60000
	enable.auto.commit = false
	exclude.internal.topics = true
	fetch.max.bytes = 52428800
	fetch.max.wait.ms = 500
	fetch.min.bytes = 1
	group.id = user-group
	group.instance.id = null
	heartbeat.interval.ms = 3000
	interceptor.classes = []
	internal.leave.group.on.close = true
	internal.throw.on.fetch.stable.offset.unsupported = false
	isolation.level = read_uncommitted
	key.deserializer = class org.apache.kafka.common.serialization.StringDeserializer
	max.partition.fetch.bytes = 1048576
	max.poll.interval.ms = 300000
	max.poll.records = 500
	metadata.max.age.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partition.assignment.strategy = [class org.apache.kafka.clients.consumer.RangeAssignor, class org.apache.kafka.clients.consumer.CooperativeStickyAssignor]
	receive.buffer.bytes = 65536
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	session.timeout.ms = 45000
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	value.deserializer = class org.apache.kafka.common.serialization.StringDeserializer

2024-10-23 23:00:01 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 23:00:01 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 23:00:01 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729713601557
2024-10-23 23:00:01 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Subscribed to topic(s): auth-event-save-user
2024-10-23 23:00:01 INFO  r.a.u.controller.UserControllerIT - Started UserControllerIT in 9.423 seconds (process running for 10.874)
2024-10-23 23:00:01 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting the last seen epoch of partition auth-event-save-user-0 to 0 since the associated topicId changed from null to Op8FvintTIC7ByszFvYjdw
2024-10-23 23:00:01 INFO  org.apache.kafka.clients.Metadata - [Consumer clientId=consumer-user-group-1, groupId=user-group] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 23:00:01 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Discovered group coordinator localhost:9092 (id: 2147483646 rack: null)
2024-10-23 23:00:01 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 23:00:01 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: need to re-join with the given member-id: consumer-user-group-1-0515d0fe-255b-4498-bdd0-e521dda5aa0c
2024-10-23 23:00:01 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: rebalance failed due to 'The group member needs to have a valid member id before actually entering a consumer group.' (MemberIdRequiredException)
2024-10-23 23:00:01 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] (Re-)joining group
2024-10-23 23:00:01 INFO  r.a.u.controller.UserController - Executing updateEmailUser for userId = 1, newEmail = newemail@example.com
2024-10-23 23:00:01 INFO  r.a.u.controller.UserController - Validation successful, userId = 1, newEmail = newemail@example.com
2024-10-23 23:00:01 INFO  r.a.userservice.service.UserService - Executing updateEmailUser: userId = 1, newEmail = newemail@example.com
2024-10-23 23:00:01 INFO  r.a.userservice.service.UserService - Getting user by id: 1
2024-10-23 23:00:01 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - Executing handleNotFoundException
2024-10-23 23:00:01 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.404.user_not_found
2024-10-23 23:00:01 ERROR r.a.u.c.a.IncorrectDataControllerAdvice - NotFoundException: ProblemDetail[type='about:blank', title='Not Found', status=404, detail='Пользователь не найден', instance='null', properties='null']
2024-10-23 23:00:02 INFO  r.a.u.controller.UserController - Executing updateEmailUser for userId = 1, newEmail = newemail@example.com
2024-10-23 23:00:02 INFO  r.a.u.controller.UserController - Validation successful, userId = 1, newEmail = newemail@example.com
2024-10-23 23:00:02 INFO  r.a.userservice.service.UserService - Executing updateEmailUser: userId = 1, newEmail = newemail@example.com
2024-10-23 23:00:02 INFO  r.a.userservice.service.UserService - Getting user by id: 1
2024-10-23 23:00:02 INFO  r.a.userservice.service.UserService - Send data oldEmail: oldemail@example.com, newEmail: newemail@example.com in kafka for update email event
2024-10-23 23:00:02 INFO  r.a.u.service.KafkaProducerService - Executing sendEditEmailEvent in kafka with oldEmail
2024-10-23 23:00:02 INFO  o.a.k.c.producer.ProducerConfig - ProducerConfig values: 
	acks = -1
	batch.size = 16384
	bootstrap.servers = [localhost:9092]
	buffer.memory = 33554432
	client.dns.lookup = use_all_dns_ips
	client.id = producer-1
	compression.type = none
	connections.max.idle.ms = 540000
	delivery.timeout.ms = 120000
	enable.idempotence = true
	interceptor.classes = []
	key.serializer = class org.apache.kafka.common.serialization.StringSerializer
	linger.ms = 0
	max.block.ms = 60000
	max.in.flight.requests.per.connection = 5
	max.request.size = 1048576
	metadata.max.age.ms = 300000
	metadata.max.idle.ms = 300000
	metric.reporters = []
	metrics.num.samples = 2
	metrics.recording.level = INFO
	metrics.sample.window.ms = 30000
	partitioner.adaptive.partitioning.enable = true
	partitioner.availability.timeout.ms = 0
	partitioner.class = null
	partitioner.ignore.keys = false
	receive.buffer.bytes = 32768
	reconnect.backoff.max.ms = 1000
	reconnect.backoff.ms = 50
	request.timeout.ms = 30000
	retries = 2147483647
	retry.backoff.ms = 100
	sasl.client.callback.handler.class = null
	sasl.jaas.config = null
	sasl.kerberos.kinit.cmd = /usr/bin/kinit
	sasl.kerberos.min.time.before.relogin = 60000
	sasl.kerberos.service.name = null
	sasl.kerberos.ticket.renew.jitter = 0.05
	sasl.kerberos.ticket.renew.window.factor = 0.8
	sasl.login.callback.handler.class = null
	sasl.login.class = null
	sasl.login.connect.timeout.ms = null
	sasl.login.read.timeout.ms = null
	sasl.login.refresh.buffer.seconds = 300
	sasl.login.refresh.min.period.seconds = 60
	sasl.login.refresh.window.factor = 0.8
	sasl.login.refresh.window.jitter = 0.05
	sasl.login.retry.backoff.max.ms = 10000
	sasl.login.retry.backoff.ms = 100
	sasl.mechanism = GSSAPI
	sasl.oauthbearer.clock.skew.seconds = 30
	sasl.oauthbearer.expected.audience = null
	sasl.oauthbearer.expected.issuer = null
	sasl.oauthbearer.jwks.endpoint.refresh.ms = 3600000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.max.ms = 10000
	sasl.oauthbearer.jwks.endpoint.retry.backoff.ms = 100
	sasl.oauthbearer.jwks.endpoint.url = null
	sasl.oauthbearer.scope.claim.name = scope
	sasl.oauthbearer.sub.claim.name = sub
	sasl.oauthbearer.token.endpoint.url = null
	security.protocol = PLAINTEXT
	security.providers = null
	send.buffer.bytes = 131072
	socket.connection.setup.timeout.max.ms = 30000
	socket.connection.setup.timeout.ms = 10000
	ssl.cipher.suites = null
	ssl.enabled.protocols = [TLSv1.2, TLSv1.3]
	ssl.endpoint.identification.algorithm = https
	ssl.engine.factory.class = null
	ssl.key.password = null
	ssl.keymanager.algorithm = SunX509
	ssl.keystore.certificate.chain = null
	ssl.keystore.key = null
	ssl.keystore.location = null
	ssl.keystore.password = null
	ssl.keystore.type = JKS
	ssl.protocol = TLSv1.3
	ssl.provider = null
	ssl.secure.random.implementation = null
	ssl.trustmanager.algorithm = PKIX
	ssl.truststore.certificates = null
	ssl.truststore.location = null
	ssl.truststore.password = null
	ssl.truststore.type = JKS
	transaction.timeout.ms = 60000
	transactional.id = null
	value.serializer = class org.springframework.kafka.support.serializer.JsonSerializer

2024-10-23 23:00:02 INFO  o.a.k.clients.producer.KafkaProducer - [Producer clientId=producer-1] Instantiated an idempotent producer.
2024-10-23 23:00:02 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka version: 3.3.1
2024-10-23 23:00:02 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka commitId: e23c59d00e687ff5
2024-10-23 23:00:02 INFO  o.a.kafka.common.utils.AppInfoParser - Kafka startTimeMs: 1729713602103
2024-10-23 23:00:02 INFO  org.apache.kafka.clients.Metadata - [Producer clientId=producer-1] Resetting the last seen epoch of partition user-event-edit-email-0 to 0 since the associated topicId changed from null to 72bs0iaYTt2_v_6iDlcUEg
2024-10-23 23:00:02 INFO  org.apache.kafka.clients.Metadata - [Producer clientId=producer-1] Cluster ID: UwaMFHSTSdaj20TTBDlQ0g
2024-10-23 23:00:02 INFO  o.a.k.c.p.i.TransactionManager - [Producer clientId=producer-1] ProducerId set to 21001 with epoch 0
2024-10-23 23:00:02 INFO  r.a.u.controller.UserController - Email update completed successfully
2024-10-23 23:00:02 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: message.ok.update_email
2024-10-23 23:00:02 INFO  r.a.u.controller.UserController - Executing updateEmailUser for userId = 1, newEmail = 
2024-10-23 23:00:02 ERROR r.a.u.controller.UserController - Validation errors during email update: [Field error in object 'updateEmailRequestDTO' on field 'email': rejected value []; codes [NotBlank.updateEmailRequestDTO.email,NotBlank.email,NotBlank.java.lang.String,NotBlank]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [updateEmailRequestDTO.email,email]; arguments []; default message [email]]; default message [Email не должен быть пустым]]
2024-10-23 23:00:02 ERROR r.a.u.c.a.BadRequestControllerAdvice - Executing handleBindException
2024-10-23 23:00:02 INFO  r.a.u.service.LocalizationService - Executing getLocalizedMessage for code: errors.400.request.title
2024-10-23 23:00:02 ERROR r.a.u.c.a.BadRequestControllerAdvice - BindException: ProblemDetail[type='about:blank', title='Bad Request', status=400, detail='Неккоретные данные при запросе', instance='null', properties='{errors=[Email не должен быть пустым]}']
2024-10-23 23:00:02 INFO  o.s.c.n.eureka.InstanceInfoFactory - Setting initial instance status as: STARTING
2024-10-23 23:00:02 INFO  o.s.c.n.e.s.EurekaServiceRegistry - Unregistering application USER-SERVICE with eureka with status DOWN
2024-10-23 23:00:02 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Member consumer-user-group-1-0515d0fe-255b-4498-bdd0-e521dda5aa0c sending LeaveGroup request to coordinator localhost:9092 (id: 2147483646 rack: null) due to the consumer unsubscribed from all topics
2024-10-23 23:00:02 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 23:00:02 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 23:00:02 INFO  o.a.k.clients.consumer.KafkaConsumer - [Consumer clientId=consumer-user-group-1, groupId=user-group] Unsubscribed all topics or patterns and assigned partitions
2024-10-23 23:00:02 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Resetting generation and member id due to: consumer pro-actively leaving the group
2024-10-23 23:00:02 INFO  o.a.k.c.c.i.ConsumerCoordinator - [Consumer clientId=consumer-user-group-1, groupId=user-group] Request joining group due to: consumer pro-actively leaving the group
2024-10-23 23:00:04 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 23:00:04 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 23:00:04 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 23:00:04 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.consumer for consumer-user-group-1 unregistered
2024-10-23 23:00:04 INFO  o.s.k.l.KafkaMessageListenerContainer - user-group: Consumer stopped
2024-10-23 23:00:04 INFO  o.a.k.clients.producer.KafkaProducer - [Producer clientId=producer-1] Closing the Kafka producer with timeoutMillis = 30000 ms.
2024-10-23 23:00:04 INFO  o.a.kafka.common.metrics.Metrics - Metrics scheduler closed
2024-10-23 23:00:04 INFO  o.a.kafka.common.metrics.Metrics - Closing reporter org.apache.kafka.common.metrics.JmxReporter
2024-10-23 23:00:04 INFO  o.a.kafka.common.metrics.Metrics - Metrics reporters closed
2024-10-23 23:00:04 INFO  o.a.kafka.common.utils.AppInfoParser - App info kafka.producer for producer-1 unregistered
2024-10-23 23:00:04 INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2024-10-23 23:00:04 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2024-10-23 23:00:04 INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
